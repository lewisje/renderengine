
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8">
   <title>engine.main.js</title>
   <link rel=stylesheet href="default.css" type="text/css" media=screen>
   <meta name="generator" content="JsDoc Toolkit 1.0">
   <style>
      body {
         font-size: 10pt;
         font-family: Helvetica, Arial, san-serif;
      }

      .TableHeadingColor { font-size: 18pt; font-weight: bold; background: #CCCCFF; }
      .TableRowColor { background: #FFFFFF; }
      
      .jsdoc_ctime
      {
         font-family: Arial, Helvetica, sans-serif;
         font-size: 9pt;
         text-align: right;
      }
      .jsdoc_copy
      {
         font-family: Arial, Helvetica, sans-serif;
         font-size: 9pt;
         text-align: left;
         font-style: italic;
      }
   </style>
</head>
<body>
<div style="text-align: center;">
   <h1>engine.main.js</h1>
</div>
<br/>
<h4>Summary</h4>
The main engine class

<br/>
<hr>
<table border="1" width="100%" cellpadding="2">
   <tr>
      <td colspan="2" class="TableHeadingColor">Class Summary</td>
   </tr>
   
      <tr class="TableRowColor">
         <td>
            <a href="Engine.html" target="main">Engine</a>
         </td>
         <td>
            
The main engine class which is responsible for keeping the world up to date.
         </td>
      </tr>
   
</table>
<br/>
<hr>
<style>
         .KEYW {color: #933;}
         .COMM {color: #bbb; font-style: italic;}
         .NUMB {color: #393;}
         .STRN {color: #393;}
         .REGX {color: #339;}
         .linenumber {border-right: 1px dotted #666; color: #666; font-style: normal;}
         </style><pre><span class='linenumber'>  1</span> <span class="WHIT">
<span class='linenumber'>  2</span> </span><span class="COMM">/**
<span class='linenumber'>  3</span>  * The Render Engine
<span class='linenumber'>  4</span>  * Engine Class
<span class='linenumber'>  5</span>  *
<span class='linenumber'>  6</span>  * @fileoverview The main engine class
<span class='linenumber'>  7</span>  *
<span class='linenumber'>  8</span>  * @author: Brett Fattori (brettf@renderengine.com)
<span class='linenumber'>  9</span>  * @author: $Author: bfattori $
<span class='linenumber'> 10</span>  * @version: $Revision: 1449 $
<span class='linenumber'> 11</span>  *
<span class='linenumber'> 12</span>  * Copyright (c) 2010 Brett Fattori (brettf@renderengine.com)
<span class='linenumber'> 13</span>  *
<span class='linenumber'> 14</span>  * Permission is hereby granted, free of charge, to any person obtaining a copy
<span class='linenumber'> 15</span>  * of this software and associated documentation files (the "Software"), to deal
<span class='linenumber'> 16</span>  * in the Software without restriction, including without limitation the rights
<span class='linenumber'> 17</span>  * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
<span class='linenumber'> 18</span>  * copies of the Software, and to permit persons to whom the Software is
<span class='linenumber'> 19</span>  * furnished to do so, subject to the following conditions:
<span class='linenumber'> 20</span>  *
<span class='linenumber'> 21</span>  * The above copyright notice and this permission notice shall be included in
<span class='linenumber'> 22</span>  * all copies or substantial portions of the Software.
<span class='linenumber'> 23</span>  *
<span class='linenumber'> 24</span>  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
<span class='linenumber'> 25</span>  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
<span class='linenumber'> 26</span>  * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
<span class='linenumber'> 27</span>  * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
<span class='linenumber'> 28</span>  * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
<span class='linenumber'> 29</span>  * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
<span class='linenumber'> 30</span>  * THE SOFTWARE.
<span class='linenumber'> 31</span>  *
<span class='linenumber'> 32</span>  */</span><span class="WHIT">
<span class='linenumber'> 33</span> 
<span class='linenumber'> 34</span> </span><span class="COMM">/**
<span class='linenumber'> 35</span>  * @class The main engine class which is responsible for keeping the world up to date.
<span class='linenumber'> 36</span>  * Additionally, the Engine will track and display metrics for optimizing a game. Finally,
<span class='linenumber'> 37</span>  * the Engine is responsible for maintaining the local client's &lt;tt>worldTime&lt;/tt>.
<span class='linenumber'> 38</span>  * &lt;p/>
<span class='linenumber'> 39</span>  * The engine includes methods to load scripts and stylesheets in a serialized fashion
<span class='linenumber'> 40</span>  * and report on the sound engine status.  Since objects are tracked by the engine, a list
<span class='linenumber'> 41</span>  * of all game objects can be obtained from the engine.  The engine also contains the root
<span class='linenumber'> 42</span>  * rendering context, or "default" context.  For anything to be rendered, or updated by the
<span class='linenumber'> 43</span>  * engine, it will need to be added to a child of the default context.
<span class='linenumber'> 44</span>  * &lt;p/>
<span class='linenumber'> 45</span>  * Other methods allow for starting or shutting down then engine, toggling metric display,
<span class='linenumber'> 46</span>  * setting of the base "frames per second", toggling of the debug mode, and processing of
<span class='linenumber'> 47</span>  * the script and function queue.
<span class='linenumber'> 48</span>  * &lt;p/>
<span class='linenumber'> 49</span>  * Since JavaScript is a single-threaded environment, frames are generated serially.  One
<span class='linenumber'> 50</span>  * frame must complete before another can be rendered.  By default, if frames are missed,
<span class='linenumber'> 51</span>  * the engine will wait until the next logical frame can be rendered.  The engine can also
<span class='linenumber'> 52</span>  * run where it doesn't skip frames, and instead runs a constant frame clock.  This
<span class='linenumber'> 53</span>  * doesn't guarantee that the engine will run at a fixed frame rate.
<span class='linenumber'> 54</span>  *
<span class='linenumber'> 55</span>  * @static
<span class='linenumber'> 56</span>  */</span><span class="WHIT">
<span class='linenumber'> 57</span> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">Engine</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Base.extend</span><span class="PUNC">(</span><span class="COMM">/** @scope Engine.prototype */</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 58</span> </span><span class="WHIT">   </span><span class="NAME">version</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"@ENGINE_VERSION"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 59</span> 
<span class='linenumber'> 60</span> </span><span class="WHIT">   </span><span class="NAME">constructor</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 61</span> 
<span class='linenumber'> 62</span> </span><span class="WHIT">   </span><span class="COMM">// Default configuration options</span><span class="WHIT">
<span class='linenumber'> 63</span> </span><span class="WHIT">   </span><span class="NAME">defaultOptions</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 64</span> </span><span class="WHIT">      </span><span class="NAME">skipFrames</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">		</span><span class="COMM">// Skip missed frames</span><span class="WHIT">
<span class='linenumber'> 65</span> </span><span class="WHIT">      </span><span class="NAME">billboards</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">		</span><span class="COMM">// Use billboards to speed up rendering</span><span class="WHIT">
<span class='linenumber'> 66</span> </span><span class="WHIT">      </span><span class="NAME">hardwareAccel</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="COMM">// Hardware acceleration is not available</span><span class="WHIT">
<span class='linenumber'> 67</span> </span><span class="WHIT">      </span><span class="NAME">pointAsArc</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">		</span><span class="COMM">// Draw points are arcs</span><span class="WHIT">
<span class='linenumber'> 68</span> </span><span class="WHIT">		</span><span class="NAME">transientMathObject</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="WHIT">		</span><span class="COMM">// MathObject is not transient (pooled)</span><span class="WHIT">
<span class='linenumber'> 69</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 70</span> 
<span class='linenumber'> 71</span> </span><span class="WHIT">   </span><span class="COMM">// Global engine options</span><span class="WHIT">
<span class='linenumber'> 72</span> </span><span class="WHIT">   </span><span class="NAME">options</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 73</span> 
<span class='linenumber'> 74</span> </span><span class="WHIT">   </span><span class="COMM">/*
<span class='linenumber'> 75</span>     * Engine objects
<span class='linenumber'> 76</span>     */</span><span class="WHIT">
<span class='linenumber'> 77</span> </span><span class="WHIT">   </span><span class="NAME">idRef</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">                  </span><span class="COMM">// Object reference Id</span><span class="WHIT">
<span class='linenumber'> 78</span> </span><span class="WHIT">   </span><span class="NAME">gameObjects</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">           </span><span class="COMM">// Live objects cache</span><span class="WHIT">
<span class='linenumber'> 79</span> </span><span class="WHIT">   </span><span class="NAME">timerPool</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">             </span><span class="COMM">// Pool of running timers</span><span class="WHIT">
<span class='linenumber'> 80</span> </span><span class="WHIT">   </span><span class="NAME">livingObjects</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">          </span><span class="COMM">// Count of live objects</span><span class="WHIT">
<span class='linenumber'> 81</span> 
<span class='linenumber'> 82</span> </span><span class="WHIT">   </span><span class="COMM">/*
<span class='linenumber'> 83</span>     * Engine info
<span class='linenumber'> 84</span>     */</span><span class="WHIT">
<span class='linenumber'> 85</span> </span><span class="WHIT">   </span><span class="NAME">fpsClock</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">33</span><span class="PUNC">,</span><span class="WHIT">              </span><span class="COMM">// The clock rate (ms)</span><span class="WHIT">
<span class='linenumber'> 86</span> </span><span class="WHIT">   </span><span class="NAME">frameTime</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">              </span><span class="COMM">// Amount of time taken to render a frame</span><span class="WHIT">
<span class='linenumber'> 87</span> </span><span class="WHIT">   </span><span class="NAME">engineLocation</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">      </span><span class="COMM">// URI of engine</span><span class="WHIT">
<span class='linenumber'> 88</span> </span><span class="WHIT">   </span><span class="NAME">defaultContext</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">      </span><span class="COMM">// The default rendering context</span><span class="WHIT">
<span class='linenumber'> 89</span> </span><span class="WHIT">   </span><span class="NAME">debugMode</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">          </span><span class="COMM">// Global debug flag</span><span class="WHIT">
<span class='linenumber'> 90</span> </span><span class="WHIT">   </span><span class="NAME">localMode</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">          </span><span class="COMM">// Local run flag</span><span class="WHIT">
<span class='linenumber'> 91</span> </span><span class="WHIT">   </span><span class="NAME">started</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">            </span><span class="COMM">// Engine started flag</span><span class="WHIT">
<span class='linenumber'> 92</span> </span><span class="WHIT">   </span><span class="NAME">running</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">            </span><span class="COMM">// Engine running flag</span><span class="WHIT">
<span class='linenumber'> 93</span> </span><span class="WHIT">   </span><span class="NAME">shuttingDown</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">       </span><span class="COMM">// Engine is shutting down</span><span class="WHIT">
<span class='linenumber'> 94</span> </span><span class="WHIT">   </span><span class="NAME">upTime</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">                 </span><span class="COMM">// The startup time</span><span class="WHIT">
<span class='linenumber'> 95</span> </span><span class="WHIT">   </span><span class="NAME">downTime</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">               </span><span class="COMM">// The shutdown time</span><span class="WHIT">
<span class='linenumber'> 96</span> </span><span class="WHIT">   </span><span class="NAME">skipFrames</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">          </span><span class="COMM">// Skip missed frames</span><span class="WHIT">
<span class='linenumber'> 97</span> 
<span class='linenumber'> 98</span> </span><span class="WHIT">   </span><span class="COMM">/*
<span class='linenumber'> 99</span>     * Sound engine info
<span class='linenumber'>100</span>     */</span><span class="WHIT">
<span class='linenumber'>101</span> </span><span class="WHIT">   </span><span class="NAME">soundsEnabled</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">      </span><span class="COMM">// Sound engine enabled flag</span><span class="WHIT">
<span class='linenumber'>102</span> 
<span class='linenumber'>103</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>104</span>     * The current time of the world on the client.  This time is updated
<span class='linenumber'>105</span>     * for each frame generated by the Engine.
<span class='linenumber'>106</span>     * @type Number
<span class='linenumber'>107</span>     * @memberOf Engine
<span class='linenumber'>108</span>     */</span><span class="WHIT">
<span class='linenumber'>109</span> </span><span class="WHIT">   </span><span class="NAME">worldTime</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">              </span><span class="COMM">// The world time</span><span class="WHIT">
<span class='linenumber'>110</span> 
<span class='linenumber'>111</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>112</span>     * The number of milliseconds the engine has been running.  This time is updated
<span class='linenumber'>113</span>     * for each frame generated by the Engine.
<span class='linenumber'>114</span>     * @type Number
<span class='linenumber'>115</span>     * @memberOf Engine
<span class='linenumber'>116</span>     */</span><span class="WHIT">
<span class='linenumber'>117</span> </span><span class="WHIT">   </span><span class="NAME">liveTime</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">               </span><span class="COMM">// The "alive" time (worldTime-upTime)</span><span class="WHIT">
<span class='linenumber'>118</span> </span><span class="WHIT">   </span><span class="WHIT">
<span class='linenumber'>119</span> </span><span class="WHIT">   </span><span class="NAME">shutdownCallbacks</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">		</span><span class="COMM">// Methods to call when the engine is shutting down</span><span class="WHIT">
<span class='linenumber'>120</span> 
<span class='linenumber'>121</span> </span><span class="WHIT">   </span><span class="COMM">// Issue #18 - Intrinsic loading dialog</span><span class="WHIT">
<span class='linenumber'>122</span> </span><span class="WHIT">   </span><span class="NAME">loadingCSS</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"&lt;style type='text/css'>div.loadbox {width:325px;height:30px;padding:10px;font:10px Arial;border:1px outset gray;-moz-border-radius:10px;-webkit-border-radius:10px} #engine-load-progress { position:relative;border:1px inset gray;width:300px;height:5px} #engine-load-progress .bar {background:silver;}&lt;/style>"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>123</span> 
<span class='linenumber'>124</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>125</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>126</span> </span><span class="WHIT">   </span><span class="COMM">//                                      ENGINE PROPERTIES</span><span class="WHIT">
<span class='linenumber'>127</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>128</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>129</span> 
<span class='linenumber'>130</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>131</span>     * Set/override the engine options.
<span class='linenumber'>132</span>     * @param opts {Object} Configuration options for the engine
<span class='linenumber'>133</span>     */</span><span class="WHIT">
<span class='linenumber'>134</span> </span><span class="WHIT">   </span><span class="NAME">setOptions</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>135</span> </span><span class="WHIT">		</span><span class="COMM">// Check for a "defaults" key</span><span class="WHIT">
<span class='linenumber'>136</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">configOpts</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>137</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts.defaults</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>138</span> </span><span class="WHIT">			</span><span class="NAME">configOpts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">opts.defaults</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>139</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>140</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>141</span> </span><span class="WHIT">		</span><span class="COMM">// See if the OS has a key</span><span class="WHIT">
<span class='linenumber'>142</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">osOpts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">platformDefaults</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">versionDefaults</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">platformVersions</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>143</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">[</span><span class="STRN">"platforms"</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">[</span><span class="STRN">"platforms"</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">EngineSupport.sysInfo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">OS</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>144</span> </span><span class="WHIT">			</span><span class="COMM">// Yep, extract that one</span><span class="WHIT">
<span class='linenumber'>145</span> </span><span class="WHIT">			</span><span class="NAME">osOpts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">[</span><span class="STRN">"platforms"</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">EngineSupport.sysInfo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">OS</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>146</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='linenumber'>147</span> </span><span class="WHIT">			</span><span class="COMM">// Check for platform defaults</span><span class="WHIT">
<span class='linenumber'>148</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">osOpts</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">osOpts</span><span class="PUNC">[</span><span class="STRN">"defaults"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>149</span> </span><span class="WHIT">				</span><span class="NAME">platformDefaults</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">osOpts</span><span class="PUNC">[</span><span class="STRN">"defaults"</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>150</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>151</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>152</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>153</span> </span><span class="WHIT">		</span><span class="COMM">// Check for general version specific options</span><span class="WHIT">
<span class='linenumber'>154</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">[</span><span class="STRN">"versions"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>155</span> </span><span class="WHIT">			</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">[</span><span class="STRN">"versions"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>156</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">parseFloat</span><span class="PUNC">(</span><span class="NAME">EngineSupport.sysInfo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">version</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NAME">parseFloat</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>157</span> </span><span class="WHIT">					</span><span class="COMM">// Add  the version options</span><span class="WHIT">
<span class='linenumber'>158</span> </span><span class="WHIT">					</span><span class="NAME">versionDefaults</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">[</span><span class="STRN">"versions"</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">v</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>159</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>160</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>161</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>162</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>163</span> </span><span class="WHIT">		</span><span class="COMM">// Finally, check the OS for version specific options</span><span class="WHIT">
<span class='linenumber'>164</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">osOpts</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">osOpts</span><span class="PUNC">[</span><span class="STRN">"versions"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>165</span> </span><span class="WHIT">			</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">osOpts</span><span class="PUNC">[</span><span class="STRN">"versions"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>166</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">parseFloat</span><span class="PUNC">(</span><span class="NAME">EngineSupport.sysInfo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">version</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NAME">parseFloat</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>167</span> </span><span class="WHIT">					</span><span class="COMM">// Add  the version options</span><span class="WHIT">
<span class='linenumber'>168</span> </span><span class="WHIT">					</span><span class="NAME">platformVersions</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">osOpts</span><span class="PUNC">[</span><span class="STRN">"versions"</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">v</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>169</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>170</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>171</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>172</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>173</span> </span><span class="WHIT">      </span><span class="NAME">$.extend</span><span class="PUNC">(</span><span class="NAME">Engine.options</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">configOpts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">platformDefaults</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">versionDefaults</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">platformVersions</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>174</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>175</span> 
<span class='linenumber'>176</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>177</span>     * Set the debug mode of the engine.  Affects message ouput and
<span class='linenumber'>178</span>     * can be queried for additional debugging operations.
<span class='linenumber'>179</span>     *
<span class='linenumber'>180</span>     * @param mode {Boolean} &lt;tt>true&lt;/tt> to set debugging mode
<span class='linenumber'>181</span>     * @memberOf Engine
<span class='linenumber'>182</span>     */</span><span class="WHIT">
<span class='linenumber'>183</span> </span><span class="WHIT">   </span><span class="NAME">setDebugMode</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">mode</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>184</span> </span><span class="WHIT">      </span><span class="NAME">this.debugMode</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">mode</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>185</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>186</span> 
<span class='linenumber'>187</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>188</span>     * Query the debugging mode of the engine.
<span class='linenumber'>189</span>     *
<span class='linenumber'>190</span>     * @return {Boolean} &lt;tt>true&lt;/tt> if the engine is in debug mode
<span class='linenumber'>191</span>     * @memberOf Engine
<span class='linenumber'>192</span>     */</span><span class="WHIT">
<span class='linenumber'>193</span> </span><span class="WHIT">   </span><span class="NAME">getDebugMode</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>194</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.debugMode</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>195</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>196</span> 
<span class='linenumber'>197</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>198</span>     * Returns &lt;tt>true&lt;/tt> if SoundManager2 is loaded and initialized
<span class='linenumber'>199</span>     * properly.  The resource loader and play manager will use this
<span class='linenumber'>200</span>     * value to execute properly.
<span class='linenumber'>201</span>     * @return {Boolean} &lt;tt>true&lt;/tt> if the sound engine was loaded properly
<span class='linenumber'>202</span>     * @memberOf Engine
<span class='linenumber'>203</span>     */</span><span class="WHIT">
<span class='linenumber'>204</span> </span><span class="WHIT">   </span><span class="NAME">isSoundEnabled</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>205</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.soundsEnabled</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>206</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>207</span> 
<span class='linenumber'>208</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>209</span>     * Set the FPS (frames per second) the engine runs at.  This value
<span class='linenumber'>210</span>     * is mainly a suggestion to the engine as to how fast you want to
<span class='linenumber'>211</span>     * redraw frames.  If frame execution time is long, frames will be
<span class='linenumber'>212</span>     * processed as time is available. See the metrics to understand
<span class='linenumber'>213</span>     * available time versus render time.
<span class='linenumber'>214</span>     *
<span class='linenumber'>215</span>     * @param fps {Number} The number of frames per second to refresh
<span class='linenumber'>216</span>     *                     Engine objects.
<span class='linenumber'>217</span>     * @memberOf Engine
<span class='linenumber'>218</span>     */</span><span class="WHIT">
<span class='linenumber'>219</span> </span><span class="WHIT">   </span><span class="NAME">setFPS</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">fps</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>220</span> </span><span class="WHIT">      </span><span class="NAME">Assert</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">fps</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"You cannot have a framerate of zero!"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>221</span> </span><span class="WHIT">      </span><span class="NAME">this.fpsClock</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NUMB">1000</span><span class="WHIT"> </span><span class="REGX">/ fps);
<span class='linenumber'>222</span>    },
<span class='linenumber'>223</span>    
<span class='linenumber'>224</span>    /</span><span class="PUNC">*</span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>225</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">Get</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">FPS</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">frames</span><span class="WHIT"> </span><span class="NAME">per</span><span class="WHIT"> </span><span class="NAME">second</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">engine</span><span class="WHIT"> </span><span class="NAME">is</span><span class="WHIT"> </span><span class="NAME">set</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">run</span><span class="WHIT"> </span><span class="NAME">at.</span><span class="WHIT">
<span class='linenumber'>226</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">Number</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>227</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">memberOf</span><span class="WHIT"> </span><span class="NAME">Engine</span><span class="WHIT">
<span class='linenumber'>228</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="REGX">/
<span class='linenumber'>229</span>    getFPS: function() {
<span class='linenumber'>230</span>       return Math.floor((1 /</span><span class="WHIT"> </span><span class="NAME">this.fpsClock</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NUMB">1000</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>231</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>232</span> </span><span class="WHIT">   </span><span class="WHIT">
<span class='linenumber'>233</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>234</span>     * Get the actual FPS (frames per second) the engine is running at.
<span class='linenumber'>235</span>     * This value will vary as load increases or decreases due to the
<span class='linenumber'>236</span>     * number of objects being rendered.  A faster machine will be able
<span class='linenumber'>237</span>     * to handle a higher FPS setting.
<span class='linenumber'>238</span>     * @return {Number}
<span class='linenumber'>239</span>     * @memberOf Engine
<span class='linenumber'>240</span>     */</span><span class="WHIT">
<span class='linenumber'>241</span> </span><span class="WHIT">   </span><span class="NAME">getActualFPS</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>242</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="WHIT"> </span><span class="REGX">/ Engine.frameTime) * 1000);
<span class='linenumber'>243</span>    },
<span class='linenumber'>244</span>    
<span class='linenumber'>245</span>    /</span><span class="PUNC">*</span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>246</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">Get</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">amount</span><span class="WHIT"> </span><span class="NAME">of</span><span class="WHIT"> </span><span class="NAME">time</span><span class="WHIT"> </span><span class="NAME">allocated</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">draw</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="NAME">single</span><span class="WHIT"> </span><span class="NAME">frame.</span><span class="WHIT">
<span class='linenumber'>247</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">Number</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="NAME">Milliseconds</span><span class="WHIT"> </span><span class="NAME">allocated</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">draw</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="NAME">frame</span><span class="WHIT">
<span class='linenumber'>248</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">memberOf</span><span class="WHIT"> </span><span class="NAME">Engine</span><span class="WHIT">
<span class='linenumber'>249</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="REGX">/
<span class='linenumber'>250</span>    getFrameTime: function() {
<span class='linenumber'>251</span>       return this.fpsClock;
<span class='linenumber'>252</span>    },
<span class='linenumber'>253</span>    
<span class='linenumber'>254</span>    /</span><span class="PUNC">*</span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>255</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">Get</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">amount</span><span class="WHIT"> </span><span class="NAME">of</span><span class="WHIT"> </span><span class="NAME">time</span><span class="WHIT"> </span><span class="NAME">it</span><span class="WHIT"> </span><span class="NAME">took</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">draw</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">last</span><span class="WHIT"> </span><span class="NAME">frame.</span><span class="WHIT">  </span><span class="NAME">This</span><span class="WHIT"> </span><span class="NAME">value</span><span class="WHIT">
<span class='linenumber'>256</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">varies</span><span class="WHIT"> </span><span class="NAME">per</span><span class="WHIT"> </span><span class="NAME">frame</span><span class="WHIT"> </span><span class="NAME">drawn</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">based</span><span class="WHIT"> </span><span class="NAME">on</span><span class="WHIT"> </span><span class="NAME">visible</span><span class="WHIT"> </span><span class="NAME">objects</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">number</span><span class="WHIT"> </span><span class="NAME">of</span><span class="WHIT"> </span><span class="NAME">operations</span><span class="WHIT">
<span class='linenumber'>257</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">performed</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">and</span><span class="WHIT"> </span><span class="NAME">other</span><span class="WHIT"> </span><span class="NAME">factors.</span><span class="WHIT">  </span><span class="NAME">The</span><span class="WHIT"> </span><span class="NAME">draw</span><span class="WHIT"> </span><span class="NAME">time</span><span class="WHIT"> </span><span class="NAME">can</span><span class="WHIT"> </span><span class="NAME">be</span><span class="WHIT"> </span><span class="NAME">used</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">optimize</span><span class="WHIT">
<span class='linenumber'>258</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">your</span><span class="WHIT"> </span><span class="NAME">game</span><span class="WHIT"> </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="NAME">performance.</span><span class="WHIT">
<span class='linenumber'>259</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">Number</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="NAME">Milliseconds</span><span class="WHIT"> </span><span class="NAME">required</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">draw</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">frame</span><span class="WHIT">
<span class='linenumber'>260</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">memberOf</span><span class="WHIT"> </span><span class="NAME">Engine</span><span class="WHIT">
<span class='linenumber'>261</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="REGX">/
<span class='linenumber'>262</span>    getDrawTime: function() {
<span class='linenumber'>263</span>       return Engine.frameTime;
<span class='linenumber'>264</span>    },
<span class='linenumber'>265</span>    
<span class='linenumber'>266</span>    /</span><span class="PUNC">*</span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>267</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">Get</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">load</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">currently</span><span class="WHIT"> </span><span class="NAME">rendered</span><span class="WHIT"> </span><span class="NAME">frame</span><span class="WHIT"> </span><span class="NAME">is</span><span class="WHIT"> </span><span class="NAME">putting</span><span class="WHIT"> </span><span class="NAME">on</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">engine.</span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>268</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">The</span><span class="WHIT"> </span><span class="NAME">load</span><span class="WHIT"> </span><span class="NAME">represents</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">amount</span><span class="WHIT"> </span><span class="NAME">of</span><span class="WHIT">
<span class='linenumber'>269</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">work</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">engine</span><span class="WHIT"> </span><span class="NAME">is</span><span class="WHIT"> </span><span class="NAME">doing</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">render</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="NAME">frame.</span><span class="WHIT">  </span><span class="NAME">A</span><span class="WHIT"> </span><span class="NAME">value</span><span class="WHIT"> </span><span class="NAME">less</span><span class="WHIT">
<span class='linenumber'>270</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">than</span><span class="WHIT"> </span><span class="NAME">one</span><span class="WHIT"> </span><span class="NAME">indicates</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">engine</span><span class="WHIT"> </span><span class="NAME">can</span><span class="WHIT"> </span><span class="NAME">render</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="NAME">frame</span><span class="WHIT"> </span><span class="NAME">within</span><span class="WHIT">
<span class='linenumber'>271</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">amount</span><span class="WHIT"> </span><span class="NAME">of</span><span class="WHIT"> </span><span class="NAME">time</span><span class="WHIT"> </span><span class="NAME">available.</span><span class="WHIT">  </span><span class="NAME">Higher</span><span class="WHIT"> </span><span class="NAME">than</span><span class="WHIT"> </span><span class="NAME">one</span><span class="WHIT"> </span><span class="NAME">indicates</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT">
<span class='linenumber'>272</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">engine</span><span class="WHIT"> </span><span class="NAME">cannot</span><span class="WHIT"> </span><span class="NAME">render</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">frame</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">time</span><span class="WHIT"> </span><span class="NAME">available.</span><span class="WHIT">
<span class='linenumber'>273</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="NAME">p</span><span class="PUNC">/</span><span class="PUNC">></span><span class="WHIT">
<span class='linenumber'>274</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">Faster</span><span class="WHIT"> </span><span class="NAME">machines</span><span class="WHIT"> </span><span class="NAME">will</span><span class="WHIT"> </span><span class="NAME">be</span><span class="WHIT"> </span><span class="NAME">able</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">handle</span><span class="WHIT"> </span><span class="NAME">more</span><span class="WHIT"> </span><span class="NAME">load.</span><span class="WHIT">  </span><span class="NAME">You</span><span class="WHIT"> </span><span class="NAME">can</span><span class="WHIT"> </span><span class="NAME">use</span><span class="WHIT">
<span class='linenumber'>275</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="NAME">value</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">gauge</span><span class="WHIT"> </span><span class="NAME">how</span><span class="WHIT"> </span><span class="NAME">well</span><span class="WHIT"> </span><span class="NAME">your</span><span class="WHIT"> </span><span class="NAME">game</span><span class="WHIT"> </span><span class="NAME">is</span><span class="WHIT"> </span><span class="NAME">performing.</span><span class="WHIT">
<span class='linenumber'>276</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">Number</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>277</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">memberOf</span><span class="WHIT"> </span><span class="NAME">Engine</span><span class="WHIT">
<span class='linenumber'>278</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="REGX">/
<span class='linenumber'>279</span>    getEngineLoad: function () {
<span class='linenumber'>280</span>       return (Engine.frameTime /</span><span class="WHIT"> </span><span class="NAME">this.fpsClock</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>281</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>282</span> 
<span class='linenumber'>283</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>284</span>     * Get the default rendering context for the Engine.  This
<span class='linenumber'>285</span>     * is the &lt;tt>document.body&lt;/tt> element in the browser.
<span class='linenumber'>286</span>     *
<span class='linenumber'>287</span>     * @return {RenderContext} The default rendering context
<span class='linenumber'>288</span>     * @memberOf Engine
<span class='linenumber'>289</span>     */</span><span class="WHIT">
<span class='linenumber'>290</span> </span><span class="WHIT">   </span><span class="NAME">getDefaultContext</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>291</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.defaultContext</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>292</span> </span><span class="WHIT">         </span><span class="NAME">this.defaultContext</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">DocumentContext.create</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>293</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>294</span> 
<span class='linenumber'>295</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.defaultContext</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>296</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>297</span> 
<span class='linenumber'>298</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>299</span>     * Get the path to the engine.  Uses the location of the &lt;tt>engine.js&lt;/tt>
<span class='linenumber'>300</span>     * file that was loaded.
<span class='linenumber'>301</span>     * @return {String} The path/URL where the engine is located
<span class='linenumber'>302</span>     * @memberOf Engine
<span class='linenumber'>303</span>     */</span><span class="WHIT">
<span class='linenumber'>304</span> </span><span class="WHIT">   </span><span class="NAME">getEnginePath</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>305</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.engineLocation</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>306</span> </span><span class="WHIT">      </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>307</span> </span><span class="WHIT">         </span><span class="COMM">// Determine the path of the "engine.js" file</span><span class="WHIT">
<span class='linenumber'>308</span> </span><span class="WHIT">         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">head</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.getElementsByTagName</span><span class="PUNC">(</span><span class="STRN">"head"</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>309</span> </span><span class="WHIT">         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">scripts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">head.getElementsByTagName</span><span class="PUNC">(</span><span class="STRN">"script"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>310</span> </span><span class="WHIT">         </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">x</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">scripts.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">x</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>311</span> </span><span class="WHIT">         </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>312</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">src</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scripts</span><span class="PUNC">[</span><span class="NAME">x</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">src</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>313</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">src</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">src.match</span><span class="PUNC">(</span><span class="REGX">/(.*)\/engine\/(.*?)engine\.js/</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>314</span> </span><span class="WHIT">            </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>315</span> </span><span class="WHIT">               </span><span class="COMM">// Get the path</span><span class="WHIT">
<span class='linenumber'>316</span> </span><span class="WHIT">               </span><span class="NAME">this.engineLocation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">src.match</span><span class="PUNC">(</span><span class="REGX">/(.*)\/engine\/(.*?)engine\.js/</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>317</span> </span><span class="WHIT">               </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>318</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>319</span> </span><span class="WHIT">         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>320</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>321</span> 
<span class='linenumber'>322</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.engineLocation</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>323</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>324</span> 
<span class='linenumber'>325</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>326</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>327</span> </span><span class="WHIT">   </span><span class="COMM">//                                  GLOBAL OBJECT MANAGEMENT</span><span class="WHIT">
<span class='linenumber'>328</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>329</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>330</span> 
<span class='linenumber'>331</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>332</span>     * Track an instance of an object managed by the Engine.  This is called
<span class='linenumber'>333</span>     * by any object that extends from {@link PooledObject}.
<span class='linenumber'>334</span>     *
<span class='linenumber'>335</span>     * @param obj {PooledObject} A managed object within the engine
<span class='linenumber'>336</span>     * @return {String} The global Id of the object
<span class='linenumber'>337</span>     * @memberOf Engine
<span class='linenumber'>338</span>     */</span><span class="WHIT">
<span class='linenumber'>339</span> </span><span class="WHIT">   </span><span class="NAME">create</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>340</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.shuttingDown</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>341</span> </span><span class="WHIT">      	</span><span class="NAME">Console.warn</span><span class="PUNC">(</span><span class="STRN">"Engine shutting down, '"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">obj</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"' destroyed because it would create an orphaned reference"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>342</span> </span><span class="WHIT">      	</span><span class="NAME">obj.destroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>343</span> </span><span class="WHIT">      	</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>344</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>345</span> 
<span class='linenumber'>346</span> </span><span class="WHIT">      </span><span class="NAME">Assert</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">this.started</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Creating an object when the engine is stopped!"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">obj</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>347</span> 
<span class='linenumber'>348</span> </span><span class="WHIT">      </span><span class="NAME">this.idRef</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>349</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">objId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">obj.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.idRef</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>350</span> </span><span class="WHIT">      </span><span class="NAME">Console.log</span><span class="PUNC">(</span><span class="STRN">"CREATED Object "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">objId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"["</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">obj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"]"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>351</span> </span><span class="WHIT">      </span><span class="NAME">this.livingObjects</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>352</span> 
<span class='linenumber'>353</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">objId</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>354</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>355</span> 
<span class='linenumber'>356</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>357</span>     * Removes an object instance managed by the Engine.
<span class='linenumber'>358</span>     *
<span class='linenumber'>359</span>     * @param obj {PooledObject} The object, managed by the engine, to destroy
<span class='linenumber'>360</span>     * @memberOf Engine
<span class='linenumber'>361</span>     */</span><span class="WHIT">
<span class='linenumber'>362</span> </span><span class="WHIT">   </span><span class="NAME">destroy</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>363</span> </span><span class="WHIT">   	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">obj</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>364</span> </span><span class="WHIT">   		</span><span class="NAME">Console.warn</span><span class="PUNC">(</span><span class="STRN">"NULL reference passed to Engine.destroy()!  Ignored."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>365</span> </span><span class="WHIT">   		</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>366</span> </span><span class="WHIT">   	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>367</span> 
<span class='linenumber'>368</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">objId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">obj.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>369</span> </span><span class="WHIT">      </span><span class="NAME">Console.log</span><span class="PUNC">(</span><span class="STRN">"DESTROYED Object "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">objId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"["</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">obj</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"]"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>370</span> </span><span class="WHIT">      </span><span class="NAME">this.livingObjects</span><span class="PUNC">--</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>371</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>372</span> </span><span class="WHIT">   </span><span class="WHIT">
<span class='linenumber'>373</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>374</span>     * Add a timer to the pool so it can be cleaned up when
<span class='linenumber'>375</span>     * the engine is shutdown, or paused when the engine is
<span class='linenumber'>376</span>     * paused.
<span class='linenumber'>377</span>     * @param timerName {String} The timer name
<span class='linenumber'>378</span>     * @param timer {Timer} The timer to add
<span class='linenumber'>379</span>     */</span><span class="WHIT">
<span class='linenumber'>380</span> </span><span class="WHIT">   </span><span class="NAME">addTimer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">timerName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">timer</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>381</span> </span><span class="WHIT">      </span><span class="NAME">Engine.timerPool</span><span class="PUNC">[</span><span class="NAME">timerName</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">timer</span><span class="PUNC">;</span><span class="WHIT">   </span><span class="WHIT">
<span class='linenumber'>382</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>383</span> 
<span class='linenumber'>384</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>385</span>     * Remove a timer from the pool when it is destroyed.
<span class='linenumber'>386</span>     * @param timerName {String} The timer name
<span class='linenumber'>387</span>     */</span><span class="WHIT">
<span class='linenumber'>388</span> </span><span class="WHIT">   </span><span class="NAME">removeTimer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">timerName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>389</span> </span><span class="WHIT">      </span><span class="NAME">Engine.timerPool</span><span class="PUNC">[</span><span class="NAME">timerName</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>390</span> </span><span class="WHIT">      </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">Engine.timerPool</span><span class="PUNC">[</span><span class="NAME">timerName</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>391</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>392</span> 
<span class='linenumber'>393</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>394</span>     * Get an object by the Id that was assigned during the call to {@link #create}.
<span class='linenumber'>395</span>     *
<span class='linenumber'>396</span>     * @param id {String} The global Id of the object to locate
<span class='linenumber'>397</span>     * @return {PooledObject} The object
<span class='linenumber'>398</span>     * @memberOf Engine
<span class='linenumber'>399</span>     * @deprecated This method no longer returns an object
<span class='linenumber'>400</span>     */</span><span class="WHIT">
<span class='linenumber'>401</span> </span><span class="WHIT">   </span><span class="NAME">getObject</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>402</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>403</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>404</span> 
<span class='linenumber'>405</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>406</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>407</span> </span><span class="WHIT">   </span><span class="COMM">//                                    ENGINE PROCESS CONTROL</span><span class="WHIT">
<span class='linenumber'>408</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>409</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>410</span> 
<span class='linenumber'>411</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>412</span>     * Load the minimal scripts required for the engine to run.
<span class='linenumber'>413</span>     * @private
<span class='linenumber'>414</span>     * @memberOf Engine
<span class='linenumber'>415</span>     */</span><span class="WHIT">
<span class='linenumber'>416</span> </span><span class="WHIT">   </span><span class="NAME">loadEngineScripts</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>417</span> </span><span class="WHIT">      </span><span class="COMM">// Engine stylesheet</span><span class="WHIT">
<span class='linenumber'>418</span> </span><span class="WHIT">      </span><span class="NAME">this.loadStylesheet</span><span class="PUNC">(</span><span class="STRN">"/css/engine.css"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>419</span> 
<span class='linenumber'>420</span> </span><span class="WHIT">      </span><span class="COMM">// The basics needed by the engine to get started</span><span class="WHIT">
<span class='linenumber'>421</span> </span><span class="WHIT">      </span><span class="NAME">this.loadNow</span><span class="PUNC">(</span><span class="STRN">"/engine/engine.game.js"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>422</span> </span><span class="WHIT">      </span><span class="NAME">this.loadNow</span><span class="PUNC">(</span><span class="STRN">"/engine/engine.rendercontext.js"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>423</span> </span><span class="WHIT">      </span><span class="NAME">this.loadNow</span><span class="PUNC">(</span><span class="STRN">"/engine/engine.pooledobject.js"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>424</span> </span><span class="WHIT">      </span><span class="NAME">this.loadNow</span><span class="PUNC">(</span><span class="STRN">"/rendercontexts/context.render2d.js"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>425</span> </span><span class="WHIT">      </span><span class="NAME">this.loadNow</span><span class="PUNC">(</span><span class="STRN">"/rendercontexts/context.htmlelement.js"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>426</span> </span><span class="WHIT">      </span><span class="NAME">this.loadNow</span><span class="PUNC">(</span><span class="STRN">"/rendercontexts/context.documentcontext.js"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>427</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>428</span> 
<span class='linenumber'>429</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>430</span>     * Starts the engine and loads the basic engine scripts.  When all scripts required
<span class='linenumber'>431</span>     * by the engine have been loaded the {@link #run} method will be called.
<span class='linenumber'>432</span>     *
<span class='linenumber'>433</span>     * @param debugMode {Boolean} &lt;tt>true&lt;/tt> to set the engine into debug mode
<span class='linenumber'>434</span>     *                            which allows the output of messages to the console.
<span class='linenumber'>435</span>     * @memberOf Engine
<span class='linenumber'>436</span>     */</span><span class="WHIT">
<span class='linenumber'>437</span> </span><span class="WHIT">   </span><span class="NAME">startup</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">debugMode</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>438</span> </span><span class="WHIT">      </span><span class="NAME">Assert</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">this.running</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"An attempt was made to restart the engine!"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>439</span> 
<span class='linenumber'>440</span> </span><span class="WHIT">      </span><span class="COMM">// Check for supported browser</span><span class="WHIT">
<span class='linenumber'>441</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.browserSupportCheck</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>442</span> </span><span class="WHIT">         </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>443</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>444</span> 
<span class='linenumber'>445</span> </span><span class="WHIT">      </span><span class="NAME">this.upTime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>446</span> </span><span class="WHIT">      </span><span class="NAME">this.debugMode</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">debugMode</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>447</span> </span><span class="WHIT">      </span><span class="NAME">this.started</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>448</span> 
<span class='linenumber'>449</span> </span><span class="WHIT">      </span><span class="COMM">// Load the required scripts</span><span class="WHIT">
<span class='linenumber'>450</span> </span><span class="WHIT">      </span><span class="NAME">this.loadEngineScripts</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>451</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>452</span> 
<span class='linenumber'>453</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>454</span>     * Runs the engine.  This will be called after all scripts have been loaded.
<span class='linenumber'>455</span>     * You will also need to call this if you pause the engine.
<span class='linenumber'>456</span>     * @memberOf Engine
<span class='linenumber'>457</span>     */</span><span class="WHIT">
<span class='linenumber'>458</span> </span><span class="WHIT">   </span><span class="NAME">run</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>459</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Engine.shuttingDown</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">Engine.running</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>460</span> </span><span class="WHIT">         </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>461</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>462</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>463</span> </span><span class="WHIT">      </span><span class="COMM">// Restart all of the timers</span><span class="WHIT">
<span class='linenumber'>464</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tm</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">Engine.timerPool</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>465</span> </span><span class="WHIT">         </span><span class="NAME">Engine.timerPool</span><span class="PUNC">[</span><span class="NAME">tm</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">restart</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>466</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>467</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>468</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">mode</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"["</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>469</span> </span><span class="WHIT">      </span><span class="NAME">mode</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.debugMode</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"DEBUG"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>470</span> </span><span class="WHIT">      </span><span class="NAME">mode</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.localMode</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">mode.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">" LOCAL"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"LOCAL"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>471</span> </span><span class="WHIT">      </span><span class="NAME">mode</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"]"</span><span class="WHIT">
<span class='linenumber'>472</span> </span><span class="WHIT">      </span><span class="NAME">Console.warn</span><span class="PUNC">(</span><span class="STRN">">>> Engine started. "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">mode</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="STRN">"[]"</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">mode</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>473</span> </span><span class="WHIT">      </span><span class="NAME">this.running</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>474</span> </span><span class="WHIT">      </span><span class="NAME">this.shuttingDown</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>475</span> 
<span class='linenumber'>476</span> </span><span class="WHIT">      </span><span class="NAME">Console.debug</span><span class="PUNC">(</span><span class="STRN">">>> sysinfo: "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">EngineSupport.sysInfo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>477</span> 
<span class='linenumber'>478</span> </span><span class="WHIT">      </span><span class="COMM">// Start world timer</span><span class="WHIT">
<span class='linenumber'>479</span> </span><span class="WHIT">      </span><span class="NAME">Engine.globalTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">window.setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">Engine.engineTimer</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.fpsClock</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>480</span> 
<span class='linenumber'>481</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>482</span> 
<span class='linenumber'>483</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>484</span>     * Pauses the engine.
<span class='linenumber'>485</span>     * @memberOf Engine
<span class='linenumber'>486</span>     */</span><span class="WHIT">
<span class='linenumber'>487</span> </span><span class="WHIT">   </span><span class="NAME">pause</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>488</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Engine.shuttingDown</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>489</span> </span><span class="WHIT">         </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>490</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>491</span> 
<span class='linenumber'>492</span> </span><span class="WHIT">      </span><span class="COMM">// Pause all of the timers</span><span class="WHIT">
<span class='linenumber'>493</span> </span><span class="WHIT">      </span><span class="NAME">Console.debug</span><span class="PUNC">(</span><span class="STRN">"Pausing all timers"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>494</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tm</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">Engine.timerPool</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>495</span> </span><span class="WHIT">         </span><span class="NAME">Engine.timerPool</span><span class="PUNC">[</span><span class="NAME">tm</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">pause</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>496</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>497</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>498</span> </span><span class="WHIT">      </span><span class="NAME">Console.warn</span><span class="PUNC">(</span><span class="STRN">">>> Engine paused &lt;&lt;&lt;"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>499</span> </span><span class="WHIT">      </span><span class="NAME">window.clearTimeout</span><span class="PUNC">(</span><span class="NAME">Engine.globalTimer</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>500</span> </span><span class="WHIT">      </span><span class="NAME">this.running</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>501</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>502</span> 
<span class='linenumber'>503</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='linenumber'>504</span> 	 * Add a method to be called when the engine is being shutdown.  Use this
<span class='linenumber'>505</span> 	 * method to allow an object, which is not referenced to by the engine, to
<span class='linenumber'>506</span> 	 * perform cleanup actions.
<span class='linenumber'>507</span> 	 *
<span class='linenumber'>508</span> 	 * @param fn {Function} The callback function
<span class='linenumber'>509</span> 	 */</span><span class="WHIT">
<span class='linenumber'>510</span> </span><span class="WHIT">	</span><span class="NAME">onShutdown</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">fn</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>511</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Engine.shuttingDown</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>512</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>513</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>514</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>515</span> </span><span class="WHIT">		</span><span class="NAME">Engine.shutdownCallbacks.push</span><span class="PUNC">(</span><span class="NAME">fn</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>516</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>517</span> 
<span class='linenumber'>518</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>519</span>     * Shutdown the engine.  Stops the global timer and cleans up (destroys) all
<span class='linenumber'>520</span>     * objects that have been created and added to the world.
<span class='linenumber'>521</span>     * @memberOf Engine
<span class='linenumber'>522</span>     */</span><span class="WHIT">
<span class='linenumber'>523</span> </span><span class="WHIT">   </span><span class="NAME">shutdown</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>524</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Engine.shuttingDown</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>525</span> </span><span class="WHIT">         </span><span class="COMM">// Prevent another shutdown</span><span class="WHIT">
<span class='linenumber'>526</span> </span><span class="WHIT">         </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>527</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>528</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>529</span> </span><span class="WHIT">      </span><span class="NAME">Engine.shuttingDown</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>530</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>531</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.running</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.started</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>532</span> </span><span class="WHIT">      </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>533</span> </span><span class="WHIT">         </span><span class="COMM">// If the engine is not currently running (i.e. paused) </span><span class="WHIT">
<span class='linenumber'>534</span> </span><span class="WHIT">         </span><span class="COMM">// restart it and then re-perform the shutdown</span><span class="WHIT">
<span class='linenumber'>535</span> </span><span class="WHIT">         </span><span class="NAME">this.running</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>536</span> </span><span class="WHIT">         </span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">Engine.shutdown</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.fpsClock</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>537</span> </span><span class="WHIT">         </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>538</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>539</span> 
<span class='linenumber'>540</span> </span><span class="WHIT">      </span><span class="NAME">this.started</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>541</span> </span><span class="WHIT">      </span><span class="NAME">window.clearTimeout</span><span class="PUNC">(</span><span class="NAME">Engine.dependencyProcessor</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>542</span> 
<span class='linenumber'>543</span> </span><span class="WHIT">      </span><span class="NAME">Console.warn</span><span class="PUNC">(</span><span class="STRN">">>> Engine shutting down..."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>544</span> 
<span class='linenumber'>545</span> </span><span class="WHIT">      </span><span class="COMM">// Stop world timer</span><span class="WHIT">
<span class='linenumber'>546</span> </span><span class="WHIT">      </span><span class="NAME">window.clearTimeout</span><span class="PUNC">(</span><span class="NAME">Engine.globalTimer</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>547</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>548</span> </span><span class="WHIT">      </span><span class="COMM">// Run through shutdown callbacks to allow objects not tracked by Engine</span><span class="WHIT">
<span class='linenumber'>549</span> </span><span class="WHIT">      </span><span class="COMM">// to clean up references, etc.</span><span class="WHIT">
<span class='linenumber'>550</span> </span><span class="WHIT">      </span><span class="KEYW">while</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Engine.shutdownCallbacks.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>551</span> </span><span class="WHIT">      	</span><span class="NAME">Engine.shutdownCallbacks.shift</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>552</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>553</span> 
<span class='linenumber'>554</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.metricDisplay</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>555</span> </span><span class="WHIT">      </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>556</span> </span><span class="WHIT">         </span><span class="NAME">this.metricDisplay.remove</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>557</span> </span><span class="WHIT">         </span><span class="NAME">this.metricDisplay</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>558</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>559</span> 
<span class='linenumber'>560</span> </span><span class="WHIT">      </span><span class="COMM">// Cancel all of the timers</span><span class="WHIT">
<span class='linenumber'>561</span> </span><span class="WHIT">      </span><span class="NAME">Console.debug</span><span class="PUNC">(</span><span class="STRN">"Cancelling all timers"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>562</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tm</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">Engine.timerPool</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>563</span> </span><span class="WHIT">         </span><span class="NAME">Engine.timerPool</span><span class="PUNC">[</span><span class="NAME">tm</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">cancel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>564</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>565</span> </span><span class="WHIT">      </span><span class="NAME">Engine.timerPool</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>566</span> 
<span class='linenumber'>567</span> </span><span class="WHIT">      </span><span class="NAME">this.downTime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>568</span> </span><span class="WHIT">      </span><span class="NAME">Console.warn</span><span class="PUNC">(</span><span class="STRN">">>> Engine stopped.  Runtime: "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.downTime</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this.upTime</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"ms"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>569</span> 
<span class='linenumber'>570</span> </span><span class="WHIT">      </span><span class="NAME">this.running</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>571</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>572</span> </span><span class="WHIT">      </span><span class="COMM">// Kill off the default context and anything</span><span class="WHIT">
<span class='linenumber'>573</span> </span><span class="WHIT">      </span><span class="COMM">// that's attached to it.  We'll alert the</span><span class="WHIT">
<span class='linenumber'>574</span> </span><span class="WHIT">      </span><span class="COMM">// developer if there's an issue with orphaned objects</span><span class="WHIT">
<span class='linenumber'>575</span> </span><span class="WHIT">      </span><span class="NAME">this.getDefaultContext</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">destroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>576</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>577</span> </span><span class="WHIT">      </span><span class="COMM">// Dump the object pool</span><span class="WHIT">
<span class='linenumber'>578</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">PooledObject</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="STRN">"undefined"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>579</span> </span><span class="WHIT">         </span><span class="NAME">PooledObject.objectPool</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>580</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>581</span> 
<span class='linenumber'>582</span> </span><span class="WHIT">      </span><span class="NAME">AssertWarn</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">this.livingObjects</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Object references not cleaned up!"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>583</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>584</span> </span><span class="WHIT">      </span><span class="NAME">this.loadedScripts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>585</span> </span><span class="WHIT">      </span><span class="NAME">this.scriptLoadCount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>586</span> </span><span class="WHIT">      </span><span class="NAME">this.scriptsProcessed</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>587</span> </span><span class="WHIT">      </span><span class="NAME">this.defaultContext</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>588</span> 
<span class='linenumber'>589</span> </span><span class="WHIT">      </span><span class="COMM">// Perform final cleanup</span><span class="WHIT">
<span class='linenumber'>590</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">Engine.UNIT_TESTING</span><span class="WHIT"> </span><span class="COMM">/* Is this a hack? */</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>591</span> </span><span class="WHIT">         </span><span class="NAME">this.cleanup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>592</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>593</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>594</span> 
<span class='linenumber'>595</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>596</span>     * After a successful shutdown, the Engine needs to clean up
<span class='linenumber'>597</span>     * all of the objects that were created on the window object by the engine.
<span class='linenumber'>598</span>     * @memberOf Engine
<span class='linenumber'>599</span>     * @private
<span class='linenumber'>600</span>     */</span><span class="WHIT">
<span class='linenumber'>601</span> </span><span class="WHIT">   </span><span class="NAME">cleanup</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>602</span> </span><span class="WHIT">      </span><span class="COMM">// Protect the HTML console, if visible</span><span class="WHIT">
<span class='linenumber'>603</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">hdc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">"#debug-console"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>604</span> </span><span class="WHIT">   </span><span class="WHIT">
<span class='linenumber'>605</span> </span><span class="WHIT">      </span><span class="COMM">// Remove the body contents</span><span class="WHIT">
<span class='linenumber'>606</span> </span><span class="WHIT">      </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document.body</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">empty</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>607</span> 
<span class='linenumber'>608</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">hdc.length</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>609</span> </span><span class="WHIT">         </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document.body</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">append</span><span class="PUNC">(</span><span class="NAME">hdc</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>610</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>611</span> 
<span class='linenumber'>612</span> </span><span class="WHIT">      </span><span class="COMM">// Remove all scripts from the &lt;head></span><span class="WHIT">
<span class='linenumber'>613</span> </span><span class="WHIT">      </span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">"head script"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>614</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>615</span> </span><span class="WHIT">      </span><span class="COMM">// Final cleanup</span><span class="WHIT">
<span class='linenumber'>616</span> </span><span class="WHIT">      </span><span class="NAME">Linker.cleanup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>617</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>618</span> </span><span class="WHIT">      </span><span class="COMM">// Shutdown complete</span><span class="WHIT">
<span class='linenumber'>619</span> </span><span class="WHIT">      </span><span class="NAME">Engine.shuttingDown</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>620</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>621</span> 
<span class='linenumber'>622</span> 
<span class='linenumber'>623</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>624</span>     * Initializes an object for use in the engine.  Calling this method is required to make sure
<span class='linenumber'>625</span>     * that all dependencies are resolved before actually instantiating an object of the specified
<span class='linenumber'>626</span>     * class.  This uses the {@link Linker} class to handle dependency processing and resolution.
<span class='linenumber'>627</span>     *
<span class='linenumber'>628</span>     * @param objectName {String} The name of the object class
<span class='linenumber'>629</span>     * @param primaryDependency {String} The name of the class for which the &lt;tt>objectName&lt;/tt> class is
<span class='linenumber'>630</span>     *                                   dependent upon.  Specifying &lt;tt>null&lt;/tt> will assume the &lt;tt>Base&lt;/tt> class.
<span class='linenumber'>631</span>     * @param fn {Function} The function to run when the object can be initialized.
<span class='linenumber'>632</span>     */</span><span class="WHIT">
<span class='linenumber'>633</span> </span><span class="WHIT">   </span><span class="NAME">initObject</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">objectName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">primaryDependency</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">fn</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>634</span> </span><span class="WHIT">      </span><span class="NAME">Linker.initObject</span><span class="PUNC">(</span><span class="NAME">objectName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">primaryDependency</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">fn</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>635</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>636</span> 
<span class='linenumber'>637</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>638</span>     * Check the current browser to see if it is supported by the
<span class='linenumber'>639</span>     * engine.  If it isn't, there's no reason to load the remainder of
<span class='linenumber'>640</span>     * the engine.  This check can be disabled with the &lt;tt>disableBrowserCheck&lt;/tt>
<span class='linenumber'>641</span>     * query parameter set to &lt;tt>true&lt;/tt>.
<span class='linenumber'>642</span>     * &lt;p/>
<span class='linenumber'>643</span>     * If the browser isn't supported, the engine is shutdown and a message is
<span class='linenumber'>644</span>     * displayed.
<span class='linenumber'>645</span>     */</span><span class="WHIT">
<span class='linenumber'>646</span> </span><span class="WHIT">   </span><span class="NAME">browserSupportCheck</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>647</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">EngineSupport.checkBooleanParam</span><span class="PUNC">(</span><span class="STRN">"disableBrowserCheck"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>648</span> </span><span class="WHIT">         </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>649</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>650</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">sInfo</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">EngineSupport.sysInfo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>651</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">msg</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"This browser is not currently supported by &lt;i>The Render Engine&lt;/i>.&lt;br/>&lt;br/>"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>652</span> </span><span class="WHIT">      </span><span class="NAME">msg</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"Please see &lt;a href='http://www.renderengine.com/browsers.php' target='_blank'>the list of "</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>653</span> </span><span class="WHIT">      </span><span class="NAME">msg</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"supported browsers&lt;/a> for more information."</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>654</span> </span><span class="WHIT">      </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">sInfo.browser</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>655</span> </span><span class="WHIT">         </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">"iPhone"</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>656</span> </span><span class="WHIT">			</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">"android"</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>657</span> </span><span class="WHIT">         </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">"msie"</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">Engine.options.billboards</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>658</span> </span><span class="WHIT">                      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>659</span> </span><span class="WHIT">         </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">"chrome"</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>660</span> </span><span class="WHIT">         </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">"Wii"</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>661</span> </span><span class="WHIT">         </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">"safari"</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>662</span> </span><span class="WHIT">         </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">"mozilla"</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>663</span> </span><span class="WHIT">         </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">"firefox"</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>664</span> </span><span class="WHIT">         </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">"opera"</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>665</span> </span><span class="WHIT">         </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="STRN">"unknown"</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">ready</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>666</span> </span><span class="WHIT">                           </span><span class="NAME">Engine.shutdown</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>667</span> </span><span class="WHIT">                           </span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">"body"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">append</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">"&lt;div class='unsupported'>"</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>668</span> </span><span class="WHIT">                              </span><span class="PUNC">.</span><span class="NAME">html</span><span class="PUNC">(</span><span class="NAME">msg</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>669</span> </span><span class="WHIT">                        </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>670</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>671</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>672</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>673</span> 
<span class='linenumber'>674</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>675</span>     * Prints the version of the engine.
<span class='linenumber'>676</span>     * @memberOf Engine
<span class='linenumber'>677</span>     */</span><span class="WHIT">
<span class='linenumber'>678</span> </span><span class="WHIT">   </span><span class="NAME">toString</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>679</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="STRN">"The Render Engine "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.version</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>680</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>681</span> 
<span class='linenumber'>682</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>683</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>684</span> </span><span class="WHIT">   </span><span class="COMM">//                                        THE WORLD TIMER</span><span class="WHIT">
<span class='linenumber'>685</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>686</span> </span><span class="WHIT">   </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'>687</span> 
<span class='linenumber'>688</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>689</span>     * This is the process which updates the world.  It starts with the default
<span class='linenumber'>690</span>     * context, telling it to update itself.  Since each context is a container,
<span class='linenumber'>691</span>     * all of the objects in the container will be called to update, and then
<span class='linenumber'>692</span>     * render themselves.
<span class='linenumber'>693</span>     *
<span class='linenumber'>694</span>     * @private
<span class='linenumber'>695</span>     * @memberOf Engine
<span class='linenumber'>696</span>     */</span><span class="WHIT">
<span class='linenumber'>697</span> </span><span class="WHIT">   </span><span class="NAME">engineTimer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>698</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Engine.shuttingDown</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>699</span> </span><span class="WHIT">         </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>700</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>701</span> 
<span class='linenumber'>702</span> </span><span class="WHIT">		</span><span class="COMM">/* pragma:DEBUG_START */</span><span class="WHIT">
<span class='linenumber'>703</span> </span><span class="WHIT">		</span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>704</span> </span><span class="WHIT">			</span><span class="NAME">Profiler.enter</span><span class="PUNC">(</span><span class="STRN">"Engine.engineTimer()"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>705</span> </span><span class="WHIT">		</span><span class="COMM">/* pragma:DEBUG_END */</span><span class="WHIT">
<span class='linenumber'>706</span> 
<span class='linenumber'>707</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">nextFrame</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Engine.fpsClock</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>708</span> 
<span class='linenumber'>709</span> </span><span class="WHIT">			</span><span class="COMM">// Update the world</span><span class="WHIT">
<span class='linenumber'>710</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Engine.running</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">Engine.getDefaultContext</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>711</span> </span><span class="WHIT">				</span><span class="NAME">Engine.vObj</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>712</span> 
<span class='linenumber'>713</span> </span><span class="WHIT">				</span><span class="COMM">// Render a frame</span><span class="WHIT">
<span class='linenumber'>714</span> </span><span class="WHIT">				</span><span class="NAME">Engine.worldTime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>715</span> </span><span class="WHIT">				</span><span class="NAME">Engine.getDefaultContext</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">update</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Engine.worldTime</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>716</span> </span><span class="WHIT">				</span><span class="NAME">Engine.frameTime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">Engine.worldTime</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>717</span> </span><span class="WHIT">				</span><span class="NAME">Engine.liveTime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Engine.worldTime</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">Engine.upTime</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>718</span> 
<span class='linenumber'>719</span> </span><span class="WHIT">				</span><span class="COMM">// Determine when the next frame should draw</span><span class="WHIT">
<span class='linenumber'>720</span> </span><span class="WHIT">				</span><span class="COMM">// If we've gone over the allotted time, wait until the next available frame</span><span class="WHIT">
<span class='linenumber'>721</span> </span><span class="WHIT">				</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">f</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">nextFrame</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">Engine.frameTime</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>722</span> </span><span class="WHIT">				</span><span class="NAME">nextFrame</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Engine.skipFrames</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">f</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">f</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">nextFrame</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">Engine.fpsClock</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>723</span> </span><span class="WHIT">				</span><span class="NAME">Engine.droppedFrames</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">f</span><span class="WHIT"> </span><span class="PUNC">&lt;=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">f</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="REGX">/ Engine.fpsClock) : 0);
<span class='linenumber'>724</span> 
<span class='linenumber'>725</span> 				/</span><span class="REGX">/ Update the metrics display
<span class='linenumber'>726</span> 				Engine.doMetrics();
<span class='linenumber'>727</span> 			}
<span class='linenumber'>728</span> 
<span class='linenumber'>729</span> 			/</span><span class="REGX">/ When the process is done, start all over again
<span class='linenumber'>730</span> 			Engine.globalTimer = setTimeout(function _engineTimer() { Engine.engineTimer(); }, nextFrame);
<span class='linenumber'>731</span> 
<span class='linenumber'>732</span> 		/</span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">pragma</span><span class="PUNC">:</span><span class="NAME">DEBUG_START</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="REGX">/
<span class='linenumber'>733</span> 		} finally {
<span class='linenumber'>734</span> 			Profiler.exit();
<span class='linenumber'>735</span> 		}
<span class='linenumber'>736</span> 		/</span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">pragma</span><span class="PUNC">:</span><span class="NAME">DEBUG_END</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="REGX">/
<span class='linenumber'>737</span>    },
<span class='linenumber'>738</span> 	
<span class='linenumber'>739</span> 	/</span><span class="REGX">/ ======================================================
<span class='linenumber'>740</span> 	/</span><span class="REGX">/ Declarations here only for documentation purposes
<span class='linenumber'>741</span> 	/</span><span class="REGX">/ See engine.script.js
<span class='linenumber'>742</span> 	/</span><span class="REGX">/ ======================================================
<span class='linenumber'>743</span> 	
<span class='linenumber'>744</span>    /</span><span class="PUNC">*</span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>745</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">Status</span><span class="WHIT"> </span><span class="NAME">message</span><span class="WHIT"> </span><span class="NAME">when</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="NAME">script</span><span class="WHIT"> </span><span class="NAME">is</span><span class="WHIT"> </span><span class="NAME">not</span><span class="WHIT"> </span><span class="NAME">found</span><span class="WHIT">
<span class='linenumber'>746</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">type</span><span class="WHIT"> </span><span class="NAME">Boolean</span><span class="WHIT">
<span class='linenumber'>747</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">memberOf</span><span class="WHIT"> </span><span class="NAME">Engine</span><span class="WHIT">
<span class='linenumber'>748</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">field</span><span class="WHIT">
<span class='linenumber'>749</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="REGX">/
<span class='linenumber'>750</span>    SCRIPT_NOT_FOUND: false,
<span class='linenumber'>751</span>    
<span class='linenumber'>752</span>    /</span><span class="PUNC">*</span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>753</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">Status</span><span class="WHIT"> </span><span class="NAME">message</span><span class="WHIT"> </span><span class="NAME">when</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="NAME">script</span><span class="WHIT"> </span><span class="NAME">is</span><span class="WHIT"> </span><span class="NAME">successfully</span><span class="WHIT"> </span><span class="NAME">loaded</span><span class="WHIT">
<span class='linenumber'>754</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">type</span><span class="WHIT"> </span><span class="NAME">Boolean</span><span class="WHIT">
<span class='linenumber'>755</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">memberOf</span><span class="WHIT"> </span><span class="NAME">Engine</span><span class="WHIT">
<span class='linenumber'>756</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">field</span><span class="WHIT">
<span class='linenumber'>757</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="REGX">/
<span class='linenumber'>758</span>    SCRIPT_LOADED: true,
<span class='linenumber'>759</span> 
<span class='linenumber'>760</span>    /</span><span class="PUNC">*</span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>761</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">Include</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="NAME">script</span><span class="WHIT"> </span><span class="NAME">file.</span><span class="WHIT">  </span><span class="NAME">This</span><span class="WHIT"> </span><span class="NAME">is</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">method</span><span class="WHIT"> </span><span class="NAME">used</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">load</span><span class="WHIT"> </span><span class="NAME">additional</span><span class="WHIT">
<span class='linenumber'>762</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">script</span><span class="WHIT"> </span><span class="NAME">files</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">relative</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">engine</span><span class="STRN">'s location.
<span class='linenumber'>763</span> &lt;pre>
<span class='linenumber'>764</span> 	Engine.include("/rendercontexts/context.canvascontext.js");
<span class='linenumber'>765</span> &lt;/pre>
<span class='linenumber'>766</span>     *
<span class='linenumber'>767</span>     * @param scriptURL {String} The URL of the script file
<span class='linenumber'>768</span>     * @memberOf Engine
<span class='linenumber'>769</span>     * @function
<span class='linenumber'>770</span>     */
<span class='linenumber'>771</span>    include: null,
<span class='linenumber'>772</span> 
<span class='linenumber'>773</span>    /**
<span class='linenumber'>774</span>     * Queue a script to load from the server and append it to
<span class='linenumber'>775</span>     * the head element of the browser.  Script names are
<span class='linenumber'>776</span>     * cached so they will not be loaded again.  Each script in the
<span class='linenumber'>777</span>     * queue is processed synchronously.
<span class='linenumber'>778</span>     *
<span class='linenumber'>779</span>     * @param scriptPath {String} The URL of a script to load.
<span class='linenumber'>780</span>     * @memberOf Engine
<span class='linenumber'>781</span>     * @function
<span class='linenumber'>782</span>     */
<span class='linenumber'>783</span>    loadScript: null,
<span class='linenumber'>784</span> 
<span class='linenumber'>785</span> 	/**
<span class='linenumber'>786</span> 	 * Load text from the specified path.
<span class='linenumber'>787</span> 	 *
<span class='linenumber'>788</span> 	 * @param path {String} The url to load
<span class='linenumber'>789</span> 	 * @param data {Object} Optional arguments to pass to server
<span class='linenumber'>790</span> 	 * @param callback {Function} The callback method which is passed the
<span class='linenumber'>791</span> 	 *		text and status code (a number) of the request.
<span class='linenumber'>792</span> 	 * @memberOf Engine
<span class='linenumber'>793</span>     * @function
<span class='linenumber'>794</span> 	 */	 
<span class='linenumber'>795</span> 	loadText: null,
<span class='linenumber'>796</span> 	
<span class='linenumber'>797</span> 	/**
<span class='linenumber'>798</span> 	 * Load text from the specified path and parse it as JSON.  We'</span><span class="NAME">re</span><span class="WHIT"> </span><span class="NAME">doing</span><span class="WHIT">
<span class='linenumber'>799</span> </span><span class="WHIT">	 </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="NAME">little</span><span class="WHIT"> </span><span class="NAME">pre</span><span class="PUNC">-</span><span class="NAME">parsing</span><span class="WHIT"> </span><span class="NAME">of</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">returned</span><span class="WHIT"> </span><span class="NAME">data</span><span class="WHIT"> </span><span class="NAME">so</span><span class="WHIT"> </span><span class="NAME">that</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">JSON</span><span class="WHIT"> </span><span class="NAME">can</span><span class="WHIT"> </span><span class="NAME">include</span><span class="WHIT">
<span class='linenumber'>800</span> </span><span class="WHIT">	 </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">comments</span><span class="WHIT"> </span><span class="NAME">which</span><span class="WHIT"> </span><span class="NAME">is</span><span class="WHIT"> </span><span class="NAME">not</span><span class="WHIT"> </span><span class="NAME">spec.</span><span class="WHIT">
<span class='linenumber'>801</span> </span><span class="WHIT">	 </span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>802</span> </span><span class="WHIT">	 </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">param</span><span class="WHIT"> </span><span class="NAME">path</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">String</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="NAME">The</span><span class="WHIT"> </span><span class="NAME">url</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">load</span><span class="WHIT">
<span class='linenumber'>803</span> </span><span class="WHIT">	 </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">param</span><span class="WHIT"> </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">Object</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="NAME">Optional</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">pass</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">server</span><span class="WHIT">
<span class='linenumber'>804</span> </span><span class="WHIT">	 </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">param</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">Function</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="NAME">The</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="WHIT"> </span><span class="NAME">method</span><span class="WHIT"> </span><span class="NAME">which</span><span class="WHIT"> </span><span class="NAME">is</span><span class="WHIT"> </span><span class="NAME">passed</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT">
<span class='linenumber'>805</span> </span><span class="WHIT">	 </span><span class="PUNC">*</span><span class="WHIT">		</span><span class="NAME">JSON</span><span class="WHIT"> </span><span class="NAME">object</span><span class="WHIT"> </span><span class="NAME">and</span><span class="WHIT"> </span><span class="NAME">status</span><span class="WHIT"> </span><span class="NAME">code</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">a</span><span class="WHIT"> </span><span class="NAME">number</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">of</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">request.</span><span class="WHIT">
<span class='linenumber'>806</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">memberOf</span><span class="WHIT"> </span><span class="NAME">Engine</span><span class="WHIT">
<span class='linenumber'>807</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="KEYW">function</span><span class="WHIT">
<span class='linenumber'>808</span> </span><span class="WHIT">	 </span><span class="PUNC">*</span><span class="REGX">/	 
<span class='linenumber'>809</span> 	loadJSON: null,
<span class='linenumber'>810</span> 
<span class='linenumber'>811</span>    /</span><span class="PUNC">*</span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>812</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">Insert</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="WHIT"> </span><span class="NAME">into</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">script</span><span class="WHIT"> </span><span class="NAME">load</span><span class="WHIT"> </span><span class="NAME">queue</span><span class="WHIT"> </span><span class="NAME">so</span><span class="WHIT"> </span><span class="NAME">that</span><span class="WHIT"> </span><span class="NAME">when</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT">
<span class='linenumber'>813</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">certain</span><span class="WHIT"> </span><span class="NAME">number</span><span class="WHIT"> </span><span class="NAME">of</span><span class="WHIT"> </span><span class="NAME">files</span><span class="WHIT"> </span><span class="NAME">has</span><span class="WHIT"> </span><span class="NAME">been</span><span class="WHIT"> </span><span class="NAME">loaded</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">we</span><span class="WHIT"> </span><span class="NAME">can</span><span class="WHIT"> </span><span class="NAME">call</span><span class="WHIT">
<span class='linenumber'>814</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="NAME">method.</span><span class="WHIT">  </span><span class="NAME">Allows</span><span class="WHIT"> </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="NAME">functionality</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">start</span><span class="WHIT"> </span><span class="KEYW">with</span><span class="WHIT">
<span class='linenumber'>815</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">incremental</span><span class="WHIT"> </span><span class="NAME">loading.</span><span class="WHIT">
<span class='linenumber'>816</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>817</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">param</span><span class="WHIT"> </span><span class="NAME">cb</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">Function</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="NAME">A</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">execute</span><span class="WHIT">
<span class='linenumber'>818</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">memberOf</span><span class="WHIT"> </span><span class="NAME">Engine</span><span class="WHIT">
<span class='linenumber'>819</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="KEYW">function</span><span class="WHIT">
<span class='linenumber'>820</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="REGX">/
<span class='linenumber'>821</span>    setQueueCallback: null,
<span class='linenumber'>822</span> 
<span class='linenumber'>823</span>    /</span><span class="PUNC">*</span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>824</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">You</span><span class="WHIT"> </span><span class="NAME">can</span><span class="WHIT"> </span><span class="NAME">pause</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">queue</span><span class="WHIT"> </span><span class="NAME">from</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">then</span><span class="WHIT">
<span class='linenumber'>825</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">unpause</span><span class="WHIT"> </span><span class="NAME">it</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="KEYW">continue</span><span class="WHIT"> </span><span class="NAME">processing</span><span class="WHIT"> </span><span class="NAME">queued</span><span class="WHIT"> </span><span class="NAME">scripts.</span><span class="WHIT">  </span><span class="NAME">This</span><span class="WHIT"> </span><span class="NAME">will</span><span class="WHIT">
<span class='linenumber'>826</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">allow</span><span class="WHIT"> </span><span class="NAME">you</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">wait</span><span class="WHIT"> </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="NAME">an</span><span class="WHIT"> </span><span class="NAME">event</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">occur</span><span class="WHIT"> </span><span class="NAME">before</span><span class="WHIT"> </span><span class="NAME">continuing</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT">
<span class='linenumber'>827</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">load</span><span class="WHIT"> </span><span class="NAME">scripts.</span><span class="WHIT">
<span class='linenumber'>828</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>829</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">param</span><span class="WHIT"> </span><span class="NAME">state</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">Boolean</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="NAME">tt</span><span class="PUNC">></span><span class="KEYW">true</span><span class="PUNC">&lt;</span><span class="REGX">/tt> to put the queue processor
<span class='linenumber'>830</span>     *                        in a paused state.
<span class='linenumber'>831</span>     * @memberOf Engine
<span class='linenumber'>832</span>     * @function
<span class='linenumber'>833</span>     */</span><span class="WHIT">
<span class='linenumber'>834</span> </span><span class="WHIT">   </span><span class="NAME">pauseQueue</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>835</span> 
<span class='linenumber'>836</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>837</span>     * Loads a game's script.  This will wait until the specified
<span class='linenumber'>838</span>     * &lt;tt>gameObjectName&lt;/tt> is available before running it.  Doing so will
<span class='linenumber'>839</span>     * ensure that all dependencies have been resolved before starting a game.
<span class='linenumber'>840</span>     * Also creates the default rendering context for the engine.
<span class='linenumber'>841</span>     * &lt;p/>
<span class='linenumber'>842</span>     * All games should execute this method to start their processing, rather than
<span class='linenumber'>843</span>     * using the script loading mechanism for engine or game scripts.  This is used
<span class='linenumber'>844</span>     * for the main game script only.  Normally it would appear in the game's "index" file.
<span class='linenumber'>845</span>     * &lt;pre>
<span class='linenumber'>846</span>     *  &lt;script type="text/javascript"&gt;
<span class='linenumber'>847</span>     *     // Load the game script
<span class='linenumber'>848</span>     *     Engine.loadGame('game.js','Spaceroids');
<span class='linenumber'>849</span>     *  &lt;/script&gt;
<span class='linenumber'>850</span>     * &lt;/pre>
<span class='linenumber'>851</span>     *
<span class='linenumber'>852</span>     * @param gameSource {String} The URL of the game script.
<span class='linenumber'>853</span>     * @param gameObjectName {String} The string name of the game object to execute.  When
<span class='linenumber'>854</span>     *                       the framework if ready, the &lt;tt>startup()&lt;/tt> method of this
<span class='linenumber'>855</span>     *                       object will be called.
<span class='linenumber'>856</span>     * @param [gameDisplayName] {String} An optional string to display in the loading dialog
<span class='linenumber'>857</span>     * @memberOf Engine
<span class='linenumber'>858</span>     * @function
<span class='linenumber'>859</span>     */</span><span class="WHIT">
<span class='linenumber'>860</span> </span><span class="WHIT">   </span><span class="NAME">loadGame</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>861</span> 
<span class='linenumber'>862</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>863</span>     * Load a script relative to the engine path.  A simple helper method which calls
<span class='linenumber'>864</span>     * {@link #loadScript} and prepends the engine path to the supplied script source.
<span class='linenumber'>865</span>     *
<span class='linenumber'>866</span>     * @param scriptSource {String} A URL to load that is relative to the engine path.
<span class='linenumber'>867</span>     * @memberOf Engine
<span class='linenumber'>868</span>     * @function
<span class='linenumber'>869</span>     */</span><span class="WHIT">
<span class='linenumber'>870</span> </span><span class="WHIT">   </span><span class="NAME">load</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>871</span> 
<span class='linenumber'>872</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>873</span>     * Load a stylesheet and append it to the document.  Allows for
<span class='linenumber'>874</span>     * scripts to specify additional stylesheets that can be loaded
<span class='linenumber'>875</span>     * as needed.  Additionally, you can use thise method to inject
<span class='linenumber'>876</span>     * the engine path into the css being loaded.  Using the variable
<span class='linenumber'>877</span>     * &lt;tt>$&lt;enginePath&gt;&lt;/tt>, you can load css relative to the
<span class='linenumber'>878</span>     * engine's path.  For example:
<span class='linenumber'>879</span>     * &lt;pre>
<span class='linenumber'>880</span>     *    .foo {
<span class='linenumber'>881</span>     *       background: url('$&lt;enginePath&gt;/myGame/images/bar.png') no-repeat 50% 50%;
<span class='linenumber'>882</span>     *    }
<span class='linenumber'>883</span>     * &lt;/pre>
<span class='linenumber'>884</span>     *
<span class='linenumber'>885</span>     * @param stylesheetPath {String} Path to the stylesheet, relative to
<span class='linenumber'>886</span>     *                                the engine path.
<span class='linenumber'>887</span>     * @memberOf Engine
<span class='linenumber'>888</span>     * @function
<span class='linenumber'>889</span>     */</span><span class="WHIT">
<span class='linenumber'>890</span> </span><span class="WHIT">   </span><span class="NAME">loadStylesheet</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>891</span> 
<span class='linenumber'>892</span> </span><span class="WHIT">	</span><span class="COMM">// ======================================================</span><span class="WHIT">
<span class='linenumber'>893</span> </span><span class="WHIT">	</span><span class="COMM">// Declarations here only for documentation purposes</span><span class="WHIT">
<span class='linenumber'>894</span> </span><span class="WHIT">	</span><span class="COMM">// See engine.metrics.js</span><span class="WHIT">
<span class='linenumber'>895</span> </span><span class="WHIT">	</span><span class="COMM">// ======================================================</span><span class="WHIT">
<span class='linenumber'>896</span> 
<span class='linenumber'>897</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>898</span>     * Toggle the display of the metrics window.  Any metrics
<span class='linenumber'>899</span>     * that are being tracked will be reported in this window.
<span class='linenumber'>900</span>     * @memberOf Engine
<span class='linenumber'>901</span>     * @function
<span class='linenumber'>902</span>     */</span><span class="WHIT">
<span class='linenumber'>903</span> </span><span class="WHIT">   </span><span class="NAME">toggleMetrics</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>904</span> 
<span class='linenumber'>905</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>906</span>     * Show the metrics window.
<span class='linenumber'>907</span>     * @memberOf Engine
<span class='linenumber'>908</span>     * @function
<span class='linenumber'>909</span>     */</span><span class="WHIT">
<span class='linenumber'>910</span> </span><span class="WHIT">   </span><span class="NAME">showMetrics</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>911</span> </span><span class="WHIT">   </span><span class="WHIT">
<span class='linenumber'>912</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>913</span>     * Show the engine performance graph.
<span class='linenumber'>914</span>     * @memberOf Engine
<span class='linenumber'>915</span>     * @function
<span class='linenumber'>916</span>     */</span><span class="WHIT">
<span class='linenumber'>917</span> </span><span class="WHIT">   </span><span class="NAME">showProfile</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>918</span> 
<span class='linenumber'>919</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>920</span>     * Hide the metrics window.
<span class='linenumber'>921</span>     * @memberOf Engine
<span class='linenumber'>922</span>     * @function
<span class='linenumber'>923</span>     */</span><span class="WHIT">
<span class='linenumber'>924</span> </span><span class="WHIT">   </span><span class="NAME">hideMetrics</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>925</span> 
<span class='linenumber'>926</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>927</span>     * Set the interval at which metrics are sampled by the system.
<span class='linenumber'>928</span>     * The default is for metrics to be calculated every 10 engine frames.
<span class='linenumber'>929</span>     *
<span class='linenumber'>930</span>     * @param sampleRate {Number} The number of ticks between samples
<span class='linenumber'>931</span>     * @memberOf Engine
<span class='linenumber'>932</span>     * @function
<span class='linenumber'>933</span>     */</span><span class="WHIT">
<span class='linenumber'>934</span> </span><span class="WHIT">   </span><span class="NAME">setMetricSampleRate</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>935</span> 
<span class='linenumber'>936</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>937</span>     * Add a metric to the game engine that can be displayed
<span class='linenumber'>938</span>     * while it is running.  If smoothing is selected, a 3 point
<span class='linenumber'>939</span>     * running average will be used to smooth out jitters in the
<span class='linenumber'>940</span>     * value that is shown.  For the &lt;tt>fmt&lt;/tt> argument,
<span class='linenumber'>941</span>     * you can provide a string which contains the pound sign "#"
<span class='linenumber'>942</span>     * that will be used to determine where the calculated value will
<span class='linenumber'>943</span>     * occur in the formatted string.
<span class='linenumber'>944</span>     *
<span class='linenumber'>945</span>     * @param metricName {String} The name of the metric to track
<span class='linenumber'>946</span>     * @param value {String/Number} The value of the metric.
<span class='linenumber'>947</span>     * @param smoothing {Boolean} &lt;tt>true&lt;/tt> to use 3 point average smoothing
<span class='linenumber'>948</span>     * @param fmt {String} The way the value should be formatted in the display (e.g. "#ms")
<span class='linenumber'>949</span>     * @memberOf Engine
<span class='linenumber'>950</span>     * @function
<span class='linenumber'>951</span>     */</span><span class="WHIT">
<span class='linenumber'>952</span> </span><span class="WHIT">   </span><span class="NAME">addMetric</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>953</span> 
<span class='linenumber'>954</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>955</span>     * Remove a metric from the display
<span class='linenumber'>956</span>     *
<span class='linenumber'>957</span>     * @param metricName {String} The name of the metric to remove
<span class='linenumber'>958</span>     * @memberOf Engine
<span class='linenumber'>959</span>     * @function
<span class='linenumber'>960</span>     */</span><span class="WHIT">
<span class='linenumber'>961</span> </span><span class="WHIT">   </span><span class="NAME">removeMetric</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT">
<span class='linenumber'>962</span> 
<span class='linenumber'>963</span> </span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// Interface</span><span class="WHIT">
<span class='linenumber'>964</span> </span><span class="WHIT">   </span><span class="NAME">globalTimer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT">
<span class='linenumber'>965</span> </span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>966</span> 
<span class='linenumber'>967</span> </span></pre>
<hr>

   <div class="jsdoc_copy">The Render Engine &copy;2008-2010 Brett Fattori, All Rights Reserved</div>

<div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoctoolkit.org/" target="_parent">JsDoc Toolkit</a> 1.4.1b on Wed Nov 17 2010 19:58:35 GMT-0500 (EST)</div>
</body>
</html>
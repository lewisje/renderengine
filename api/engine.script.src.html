
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8">
   <title>engine.script.js</title>
   <link rel=stylesheet href="default.css" type="text/css" media=screen>
   <meta name="generator" content="JsDoc Toolkit 1.0">
   <style>
      body {
         font-size: 10pt;
         font-family: Helvetica, Arial, san-serif;
      }

      .TableHeadingColor { font-size: 18pt; font-weight: bold; background: #CCCCFF; }
      .TableRowColor { background: #FFFFFF; }
      
      .jsdoc_ctime
      {
         font-family: Arial, Helvetica, sans-serif;
         font-size: 9pt;
         text-align: right;
      }
      .jsdoc_copy
      {
         font-family: Arial, Helvetica, sans-serif;
         font-size: 9pt;
         text-align: left;
         font-style: italic;
      }
   </style>
</head>
<body>
<div style="text-align: center;">
   <h1>engine.script.js</h1>
</div>
<br/>
<h4>Summary</h4>


<br/>
<hr>
<table border="1" width="100%" cellpadding="2">
   <tr>
      <td colspan="2" class="TableHeadingColor">Class Summary</td>
   </tr>
   
</table>
<br/>
<hr>
<style>
         .KEYW {color: #933;}
         .COMM {color: #bbb; font-style: italic;}
         .NUMB {color: #393;}
         .STRN {color: #393;}
         .REGX {color: #339;}
         .linenumber {border-right: 1px dotted #666; color: #666; font-style: normal;}
         </style><pre><span class='linenumber'>  1</span> <span class="COMM">/**
<span class='linenumber'>  2</span>  * The Render Engine
<span class='linenumber'>  3</span>  * 
<span class='linenumber'>  4</span>  * An extension to the engine for script loading and processing.
<span class='linenumber'>  5</span>  *
<span class='linenumber'>  6</span>  * @author: Brett Fattori (brettf@renderengine.com)
<span class='linenumber'>  7</span>  *
<span class='linenumber'>  8</span>  * @author: $Author$
<span class='linenumber'>  9</span>  * @version: $Revision$
<span class='linenumber'> 10</span>  *
<span class='linenumber'> 11</span>  * Copyright (c) 2008 Brett Fattori (brettf@renderengine.com)
<span class='linenumber'> 12</span>  * 
<span class='linenumber'> 13</span>  * Permission is hereby granted, free of charge, to any person obtaining a copy
<span class='linenumber'> 14</span>  * of this software and associated documentation files (the "Software"), to deal
<span class='linenumber'> 15</span>  * in the Software without restriction, including without limitation the rights
<span class='linenumber'> 16</span>  * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
<span class='linenumber'> 17</span>  * copies of the Software, and to permit persons to whom the Software is
<span class='linenumber'> 18</span>  * furnished to do so, subject to the following conditions:
<span class='linenumber'> 19</span>  * 
<span class='linenumber'> 20</span>  * The above copyright notice and this permission notice shall be included in
<span class='linenumber'> 21</span>  * all copies or substantial portions of the Software.
<span class='linenumber'> 22</span>  * 
<span class='linenumber'> 23</span>  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
<span class='linenumber'> 24</span>  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
<span class='linenumber'> 25</span>  * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
<span class='linenumber'> 26</span>  * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
<span class='linenumber'> 27</span>  * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
<span class='linenumber'> 28</span>  * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
<span class='linenumber'> 29</span>  * THE SOFTWARE.
<span class='linenumber'> 30</span>  *
<span class='linenumber'> 31</span>  */</span><span class="WHIT">
<span class='linenumber'> 32</span> 
<span class='linenumber'> 33</span> </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'> 34</span> </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'> 35</span> </span><span class="COMM">//                                     SCRIPT PROCESSING</span><span class="WHIT">
<span class='linenumber'> 36</span> </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'> 37</span> </span><span class="COMM">//====================================================================================================</span><span class="WHIT">
<span class='linenumber'> 38</span> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">Engine</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Engine.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 39</span> </span><span class="WHIT">	</span><span class="COMM">/** @lends Engine */</span><span class="WHIT">
<span class='linenumber'> 40</span> </span><span class="WHIT">   </span><span class="NAME">constructor</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 41</span> 
<span class='linenumber'> 42</span> </span><span class="WHIT">   </span><span class="COMM">/*
<span class='linenumber'> 43</span>     * Script queue
<span class='linenumber'> 44</span>     */</span><span class="WHIT">
<span class='linenumber'> 45</span> </span><span class="WHIT">   </span><span class="NAME">scriptQueue</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 46</span> </span><span class="WHIT">   </span><span class="NAME">loadedScripts</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">         </span><span class="COMM">// Cache of loaded scripts</span><span class="WHIT">
<span class='linenumber'> 47</span> </span><span class="WHIT">   </span><span class="NAME">scriptLoadCount</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">        </span><span class="COMM">// Number of queued scripts to load</span><span class="WHIT">
<span class='linenumber'> 48</span> </span><span class="WHIT">   </span><span class="NAME">scriptsProcessed</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">       </span><span class="COMM">// Number of scripts processed</span><span class="WHIT">
<span class='linenumber'> 49</span> </span><span class="WHIT">   </span><span class="NAME">scriptRatio</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">            </span><span class="COMM">// Ratio between processed/queued</span><span class="WHIT">
<span class='linenumber'> 50</span> </span><span class="WHIT">   </span><span class="NAME">queuePaused</span><span class="PUNC">:</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">         </span><span class="COMM">// Script queue paused flag</span><span class="WHIT">
<span class='linenumber'> 51</span> </span><span class="WHIT">   </span><span class="NAME">pauseReps</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">              </span><span class="COMM">// Queue run repetitions while paused</span><span class="WHIT">
<span class='linenumber'> 52</span> </span><span class="WHIT">   </span><span class="WHIT">
<span class='linenumber'> 53</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'> 54</span>     * Status message when a script is not found
<span class='linenumber'> 55</span>     * @memberOf Engine
<span class='linenumber'> 56</span>     */</span><span class="WHIT">
<span class='linenumber'> 57</span> </span><span class="WHIT">   </span><span class="NAME">SCRIPT_NOT_FOUND</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 58</span> </span><span class="WHIT">   </span><span class="WHIT">
<span class='linenumber'> 59</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'> 60</span>     * Status message when a script is successfully loaded
<span class='linenumber'> 61</span>     * @memberOf Engine
<span class='linenumber'> 62</span>     */</span><span class="WHIT">
<span class='linenumber'> 63</span> </span><span class="WHIT">   </span><span class="NAME">SCRIPT_LOADED</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 64</span> 
<span class='linenumber'> 65</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'> 66</span>     * Include a script file.
<span class='linenumber'> 67</span>     *
<span class='linenumber'> 68</span>     * @param scriptURL {String} The URL of the script file
<span class='linenumber'> 69</span>     * @memberOf Engine
<span class='linenumber'> 70</span>     */</span><span class="WHIT">
<span class='linenumber'> 71</span> </span><span class="WHIT">   </span><span class="NAME">include</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">scriptURL</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 72</span> </span><span class="WHIT">      </span><span class="NAME">Engine.loadNow</span><span class="PUNC">(</span><span class="NAME">scriptURL</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 73</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 74</span> 
<span class='linenumber'> 75</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'> 76</span>     * Perform an immediate load on the specified script.  Objects within
<span class='linenumber'> 77</span>     * the script may not immediately initialize, unless their dependencies
<span class='linenumber'> 78</span>     * have been resolved.
<span class='linenumber'> 79</span>     * 
<span class='linenumber'> 80</span>     * @param {String} scriptPath The path to the script to load
<span class='linenumber'> 81</span>     * @param {Function} [cb] The function to call when the script is loaded.
<span class='linenumber'> 82</span>     *                   the path of the script loaded and a status message
<span class='linenumber'> 83</span>     *                   will be passed as the two parameters.
<span class='linenumber'> 84</span>     * @memberOf Engine
<span class='linenumber'> 85</span>     * @private
<span class='linenumber'> 86</span>     */</span><span class="WHIT">
<span class='linenumber'> 87</span> </span><span class="WHIT">   </span><span class="NAME">loadNow</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">scriptPath</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">cb</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 88</span> </span><span class="WHIT">      </span><span class="NAME">this.doLoad</span><span class="PUNC">(</span><span class="NAME">this.getEnginePath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">scriptPath</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">scriptPath</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">cb</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 89</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 90</span> </span><span class="WHIT">   </span><span class="WHIT">
<span class='linenumber'> 91</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'> 92</span>     * Queue a script to load from the server and append it to
<span class='linenumber'> 93</span>     * the head element of the browser.  Script names are
<span class='linenumber'> 94</span>     * cached so they will not be loaded again.  Each script in the
<span class='linenumber'> 95</span>     * queue is processed synchronously.
<span class='linenumber'> 96</span>     *
<span class='linenumber'> 97</span>     * @param scriptPath {String} The URL of a script to load.
<span class='linenumber'> 98</span>     * @memberOf Engine
<span class='linenumber'> 99</span>     */</span><span class="WHIT">
<span class='linenumber'>100</span> </span><span class="WHIT">   </span><span class="NAME">loadScript</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">scriptPath</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">owner</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>101</span> </span><span class="WHIT">      </span><span class="COMM">// Put script into load queue</span><span class="WHIT">
<span class='linenumber'>102</span> </span><span class="WHIT">      </span><span class="NAME">Engine.scriptQueue.push</span><span class="PUNC">(</span><span class="NAME">scriptPath</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>103</span> </span><span class="WHIT">      </span><span class="NAME">Engine.runScriptQueue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>104</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>105</span> 
<span class='linenumber'>106</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>107</span>     * Internal method which runs the script queue to handle scripts and functions
<span class='linenumber'>108</span>     * which are queued to run sequentially.
<span class='linenumber'>109</span>     * @private
<span class='linenumber'>110</span>     * @memberOf Engine
<span class='linenumber'>111</span>     */</span><span class="WHIT">
<span class='linenumber'>112</span> </span><span class="WHIT">   </span><span class="NAME">runScriptQueue</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>113</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">Engine.scriptQueueTimer</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>114</span> </span><span class="WHIT">         </span><span class="COMM">// Process any waiting scripts</span><span class="WHIT">
<span class='linenumber'>115</span> </span><span class="WHIT">         </span><span class="NAME">Engine.scriptQueueTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">setInterval</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>116</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Engine.queuePaused</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>117</span> </span><span class="WHIT">               </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Engine.pauseReps</span><span class="PUNC">++</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">500</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>118</span> </span><span class="WHIT">                  </span><span class="COMM">// If after ~5 seconds the queue is still paused, unpause it and</span><span class="WHIT">
<span class='linenumber'>119</span> </span><span class="WHIT">                  </span><span class="COMM">// warn the user that the situation occurred</span><span class="WHIT">
<span class='linenumber'>120</span> </span><span class="WHIT">                  </span><span class="NAME">Console.error</span><span class="PUNC">(</span><span class="STRN">"Script queue was paused for 5 seconds and not resumed -- restarting..."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>121</span> </span><span class="WHIT">                  </span><span class="NAME">Engine.pauseReps</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>122</span> </span><span class="WHIT">                  </span><span class="NAME">Engine.pauseQueue</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>123</span> </span><span class="WHIT">               </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>124</span> </span><span class="WHIT">               </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>125</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>126</span> 
<span class='linenumber'>127</span> </span><span class="WHIT">            </span><span class="NAME">Engine.pauseReps</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>128</span> 
<span class='linenumber'>129</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Engine.scriptQueue.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>130</span> </span><span class="WHIT">               </span><span class="NAME">Engine.processScriptQueue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>131</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>132</span> </span><span class="WHIT">               </span><span class="COMM">// Stop the queue timer if there are no scripts</span><span class="WHIT">
<span class='linenumber'>133</span> </span><span class="WHIT">               </span><span class="NAME">clearInterval</span><span class="PUNC">(</span><span class="NAME">Engine.scriptQueueTimer</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>134</span> </span><span class="WHIT">               </span><span class="NAME">Engine.scriptQueueTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>135</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>136</span> </span><span class="WHIT">         </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>137</span> 
<span class='linenumber'>138</span> </span><span class="WHIT">         </span><span class="NAME">Engine.readyForNextScript</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>139</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>140</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>141</span> 
<span class='linenumber'>142</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>143</span>     * Put a callback into the script queue so that when a
<span class='linenumber'>144</span>     * certain number of files has been loaded, we can call
<span class='linenumber'>145</span>     * a method.  Allows for functionality to start with
<span class='linenumber'>146</span>     * incremental loading.
<span class='linenumber'>147</span>     *
<span class='linenumber'>148</span>     * @param cb {Function} A callback to execute
<span class='linenumber'>149</span>     * @memberOf Engine
<span class='linenumber'>150</span>     */</span><span class="WHIT">
<span class='linenumber'>151</span> </span><span class="WHIT">   </span><span class="NAME">setQueueCallback</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">cb</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>152</span> </span><span class="WHIT">      </span><span class="COMM">// Put callback into load queue</span><span class="WHIT">
<span class='linenumber'>153</span> </span><span class="WHIT">      </span><span class="NAME">Engine.scriptQueue.push</span><span class="PUNC">(</span><span class="NAME">cb</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>154</span> </span><span class="WHIT">      </span><span class="NAME">Engine.runScriptQueue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>155</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>156</span> 
<span class='linenumber'>157</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>158</span>     * You can pause the queue from a callback function, then
<span class='linenumber'>159</span>     * unpause it to continue processing queued scripts.  This will
<span class='linenumber'>160</span>     * allow you to wait for an event to occur before continuing to
<span class='linenumber'>161</span>     * to load scripts.
<span class='linenumber'>162</span>     *
<span class='linenumber'>163</span>     * @param state {Boolean} &lt;tt>true&lt;/tt> to put the queue processor
<span class='linenumber'>164</span>     *                        in a paused state.
<span class='linenumber'>165</span>     * @memberOf Engine
<span class='linenumber'>166</span>     */</span><span class="WHIT">
<span class='linenumber'>167</span> </span><span class="WHIT">   </span><span class="NAME">pauseQueue</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">state</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>168</span> </span><span class="WHIT">      </span><span class="NAME">Engine.queuePaused</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">state</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>169</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>170</span> 
<span class='linenumber'>171</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>172</span>     * Process any scripts that are waiting to be loaded.
<span class='linenumber'>173</span>     * @private
<span class='linenumber'>174</span>     * @memberOf Engine
<span class='linenumber'>175</span>     */</span><span class="WHIT">
<span class='linenumber'>176</span> </span><span class="WHIT">   </span><span class="NAME">processScriptQueue</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>177</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Engine.scriptQueue.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">Engine.readyForNextScript</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>178</span> </span><span class="WHIT">         </span><span class="COMM">// Hold the queue until the script is loaded</span><span class="WHIT">
<span class='linenumber'>179</span> </span><span class="WHIT">         </span><span class="NAME">Engine.readyForNextScript</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>180</span> 
<span class='linenumber'>181</span> </span><span class="WHIT">         </span><span class="COMM">// Get next script...</span><span class="WHIT">
<span class='linenumber'>182</span> </span><span class="WHIT">         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">scriptPath</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Engine.scriptQueue.shift</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>183</span> 
<span class='linenumber'>184</span> </span><span class="WHIT">         </span><span class="COMM">// If the queue element is a function, execute it and return</span><span class="WHIT">
<span class='linenumber'>185</span> </span><span class="WHIT">         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">scriptPath</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>186</span> </span><span class="WHIT">            </span><span class="NAME">scriptPath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>187</span> </span><span class="WHIT">            </span><span class="NAME">Engine.readyForNextScript</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>188</span> </span><span class="WHIT">            </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>189</span> </span><span class="WHIT">         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>190</span> 
<span class='linenumber'>191</span> </span><span class="WHIT">         </span><span class="NAME">this.doLoad</span><span class="PUNC">(</span><span class="NAME">scriptPath</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>192</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>193</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>194</span> 
<span class='linenumber'>195</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>196</span>     * This method performs the actual script loading.
<span class='linenumber'>197</span>     * @private
<span class='linenumber'>198</span>     * @memberOf Engine
<span class='linenumber'>199</span>     */</span><span class="WHIT">
<span class='linenumber'>200</span> </span><span class="WHIT">   </span><span class="NAME">doLoad</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">scriptPath</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">simplePath</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">cb</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>201</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.started</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>202</span> </span><span class="WHIT">         </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>203</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>204</span> 
<span class='linenumber'>205</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scriptPath.replace</span><span class="PUNC">(</span><span class="REGX">/[\/\.]/g</span><span class="PUNC">,</span><span class="STRN">"_"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>206</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.loadedScripts</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>207</span> </span><span class="WHIT">      </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>208</span> </span><span class="WHIT">         </span><span class="COMM">// Store the request in the cache</span><span class="WHIT">
<span class='linenumber'>209</span> </span><span class="WHIT">         </span><span class="NAME">this.loadedScripts</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scriptPath</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>210</span> 
<span class='linenumber'>211</span> </span><span class="WHIT">         </span><span class="NAME">Engine.scriptLoadCount</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>212</span> </span><span class="WHIT">         </span><span class="NAME">Engine.updateProgress</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>213</span> 
<span class='linenumber'>214</span> </span><span class="WHIT">         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">$.browser.Wii</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>215</span> 
<span class='linenumber'>216</span> </span><span class="WHIT">            </span><span class="NAME">$.get</span><span class="PUNC">(</span><span class="NAME">scriptPath</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>217</span> 
<span class='linenumber'>218</span> </span><span class="WHIT">               </span><span class="COMM">// Parse script code for syntax errors</span><span class="WHIT">
<span class='linenumber'>219</span> </span><span class="WHIT">               </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Engine.parseSyntax</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>220</span> </span><span class="WHIT">                  </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"script"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>221</span> </span><span class="WHIT">                  </span><span class="NAME">n.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"text/javascript"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>222</span> </span><span class="WHIT">                  </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">text</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>223</span> 
<span class='linenumber'>224</span> </span><span class="WHIT">                  </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.getElementsByTagName</span><span class="PUNC">(</span><span class="STRN">"head"</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>225</span> </span><span class="WHIT">                  </span><span class="NAME">h.appendChild</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>226</span> </span><span class="WHIT">                  </span><span class="NAME">Engine.readyForNextScript</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>227</span> </span><span class="WHIT">                  </span><span class="WHIT">
<span class='linenumber'>228</span> </span><span class="WHIT">                  </span><span class="NAME">Engine.scriptLoadCount</span><span class="PUNC">--</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>229</span> </span><span class="WHIT">                  </span><span class="NAME">Engine.updateProgress</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>230</span> </span><span class="WHIT">                  </span><span class="NAME">Console.debug</span><span class="PUNC">(</span><span class="STRN">"Loaded '"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">scriptPath</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"'"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>231</span> </span><span class="WHIT">               </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>232</span> </span><span class="WHIT">               </span><span class="WHIT">
<span class='linenumber'>233</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"text"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>234</span> </span><span class="WHIT">         </span><span class="PUNC">}</span><span class="WHIT">  </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>235</span> 
<span class='linenumber'>236</span> </span><span class="WHIT">            </span><span class="COMM">// We'll use our own script loader so we can detect errors (i.e. missing files).</span><span class="WHIT">
<span class='linenumber'>237</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"script"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>238</span> </span><span class="WHIT">            </span><span class="NAME">n.src</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scriptPath</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>239</span> </span><span class="WHIT">            </span><span class="NAME">n.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"text/javascript"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>240</span> 
<span class='linenumber'>241</span> </span><span class="WHIT">            </span><span class="COMM">// When the file is loaded</span><span class="WHIT">
<span class='linenumber'>242</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">fn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>243</span> </span><span class="WHIT">               </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.readyState</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.readyState</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"loaded"</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.readyState</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"complete"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>244</span> </span><span class="WHIT">                  </span><span class="NAME">Console.debug</span><span class="PUNC">(</span><span class="STRN">"Loaded '"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">scriptPath</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"'"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>245</span> </span><span class="WHIT">                  </span><span class="NAME">Engine.handleScriptDone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>246</span> </span><span class="WHIT">                  </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cb</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>247</span> </span><span class="WHIT">                     </span><span class="NAME">cb</span><span class="PUNC">(</span><span class="NAME">simplePath</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Engine.SCRIPT_LOADED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>248</span> </span><span class="WHIT">                  </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>249</span> </span><span class="WHIT">                  </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">Engine.localMode</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>250</span> </span><span class="WHIT">                     </span><span class="COMM">// Delete the script node</span><span class="WHIT">
<span class='linenumber'>251</span> </span><span class="WHIT">                     </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>252</span> </span><span class="WHIT">                  </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>253</span> 
<span class='linenumber'>254</span> </span><span class="WHIT">               </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>255</span> </span><span class="WHIT">               </span><span class="NAME">Engine.readyForNextScript</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>256</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>257</span> 
<span class='linenumber'>258</span> </span><span class="WHIT">            </span><span class="COMM">// When an error occurs</span><span class="WHIT">
<span class='linenumber'>259</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">eFn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">msg</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>260</span> </span><span class="WHIT">               </span><span class="NAME">Console.error</span><span class="PUNC">(</span><span class="STRN">"File not found: "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">scriptPath</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>261</span> </span><span class="WHIT">               </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cb</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>262</span> </span><span class="WHIT">                  </span><span class="NAME">cb</span><span class="PUNC">(</span><span class="NAME">simplePath</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Engine.SCRIPT_NOT_FOUND</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>263</span> </span><span class="WHIT">               </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>264</span> </span><span class="WHIT">               </span><span class="NAME">Engine.readyForNextScript</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>265</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>266</span> 
<span class='linenumber'>267</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">$.browser.msie</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>268</span> </span><span class="WHIT">               </span><span class="NAME">n.defer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>269</span> </span><span class="WHIT">               </span><span class="NAME">n.onreadystatechange</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">fn</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>270</span> </span><span class="WHIT">               </span><span class="NAME">n.onerror</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">eFn</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>271</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>272</span> </span><span class="WHIT">               </span><span class="NAME">n.onload</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">fn</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>273</span> </span><span class="WHIT">               </span><span class="NAME">n.onerror</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">eFn</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>274</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>275</span> 
<span class='linenumber'>276</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.getElementsByTagName</span><span class="PUNC">(</span><span class="STRN">"head"</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>277</span> </span><span class="WHIT">            </span><span class="NAME">h.appendChild</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>278</span> </span><span class="WHIT">         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>279</span> 
<span class='linenumber'>280</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>281</span> </span><span class="WHIT">         </span><span class="COMM">// Already have this script</span><span class="WHIT">
<span class='linenumber'>282</span> </span><span class="WHIT">         </span><span class="NAME">Engine.readyForNextScript</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>283</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>284</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>285</span> 
<span class='linenumber'>286</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>287</span>     * Loads a game's script.  This will wait until the specified
<span class='linenumber'>288</span>     * &lt;tt>gameObjectName&lt;/tt> is available before running it.  Doing so will
<span class='linenumber'>289</span>     * ensure that all dependencies have been resolved before starting a game.
<span class='linenumber'>290</span>     * Also creates the default rendering context for the engine.
<span class='linenumber'>291</span>     * &lt;p/>
<span class='linenumber'>292</span>     * All games should execute this method to start their processing, rather than
<span class='linenumber'>293</span>     * using the script loading mechanism for engine or game scripts.  This is used
<span class='linenumber'>294</span>     * for the main game script only.  Normally it would appear in the game's "index" file.
<span class='linenumber'>295</span>     * &lt;pre>
<span class='linenumber'>296</span>     *  &lt;script type="text/javascript"&gt;
<span class='linenumber'>297</span>     *     // Load the game script
<span class='linenumber'>298</span>     *     Engine.loadGame('game.js','Spaceroids');
<span class='linenumber'>299</span>     *  &lt;/script&gt;
<span class='linenumber'>300</span>     * &lt;/pre>
<span class='linenumber'>301</span>     *
<span class='linenumber'>302</span>     * @param gameSource {String} The URL of the game script.
<span class='linenumber'>303</span>     * @param gameObjectName {String} The string name of the game object to execute.  When
<span class='linenumber'>304</span>     *                       the framework if ready, the &lt;tt>startup()&lt;/tt> method of this
<span class='linenumber'>305</span>     *                       object will be called.
<span class='linenumber'>306</span>     * @memberOf Engine
<span class='linenumber'>307</span>     */</span><span class="WHIT">
<span class='linenumber'>308</span> </span><span class="WHIT">   </span><span class="NAME">loadGame</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">gameSource</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">gameObjectName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>309</span> </span><span class="WHIT">      </span><span class="COMM">// We'll wait for the Engine to be ready before we load the game</span><span class="WHIT">
<span class='linenumber'>310</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">engine</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>311</span> </span><span class="WHIT">      </span><span class="NAME">Engine.gameLoadTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">setInterval</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>312</span> </span><span class="WHIT">         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">[</span><span class="STRN">"DocumentContext"</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>313</span> 
<span class='linenumber'>314</span> </span><span class="WHIT">            </span><span class="COMM">// Start the engine</span><span class="WHIT">
<span class='linenumber'>315</span> </span><span class="WHIT">            </span><span class="NAME">Engine.run</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>316</span> 
<span class='linenumber'>317</span> </span><span class="WHIT">            </span><span class="COMM">// Stop the timer</span><span class="WHIT">
<span class='linenumber'>318</span> </span><span class="WHIT">            </span><span class="NAME">clearInterval</span><span class="PUNC">(</span><span class="NAME">Engine.gameLoadTimer</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>319</span> </span><span class="WHIT">            </span><span class="NAME">Engine.gameLoadTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>320</span> 
<span class='linenumber'>321</span> </span><span class="WHIT">            </span><span class="COMM">// Load the game</span><span class="WHIT">
<span class='linenumber'>322</span> </span><span class="WHIT">            </span><span class="NAME">Console.debug</span><span class="PUNC">(</span><span class="STRN">"Loading '"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">gameSource</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"'"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>323</span> </span><span class="WHIT">            </span><span class="NAME">engine.loadScript</span><span class="PUNC">(</span><span class="NAME">gameSource</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>324</span> 
<span class='linenumber'>325</span> </span><span class="WHIT">            </span><span class="COMM">// Start the game when it's ready</span><span class="WHIT">
<span class='linenumber'>326</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">gameObjectName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>327</span> </span><span class="WHIT">               </span><span class="NAME">Engine.gameRunTimer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">setInterval</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>328</span> </span><span class="WHIT">                  </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">window</span><span class="PUNC">[</span><span class="NAME">gameObjectName</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="STRN">"undefined"</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT">
<span class='linenumber'>329</span> </span><span class="WHIT">                        </span><span class="NAME">window</span><span class="PUNC">[</span><span class="NAME">gameObjectName</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">setup</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>330</span> </span><span class="WHIT">                     </span><span class="NAME">clearInterval</span><span class="PUNC">(</span><span class="NAME">Engine.gameRunTimer</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>331</span> 
<span class='linenumber'>332</span> </span><span class="WHIT">                     </span><span class="COMM">// Remove the "loading" message</span><span class="WHIT">
<span class='linenumber'>333</span> </span><span class="WHIT">                     </span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">"#loading"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>334</span> </span><span class="WHIT">                     </span><span class="NAME">Console.warn</span><span class="PUNC">(</span><span class="STRN">"Starting: "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">gameObjectName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>335</span> </span><span class="WHIT">                     </span><span class="WHIT">
<span class='linenumber'>336</span> </span><span class="WHIT">                     </span><span class="COMM">// Start the game</span><span class="WHIT">
<span class='linenumber'>337</span> </span><span class="WHIT">                     </span><span class="NAME">window</span><span class="PUNC">[</span><span class="NAME">gameObjectName</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">setup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>338</span> </span><span class="WHIT">                  </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>339</span> </span><span class="WHIT">               </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">100</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>340</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>341</span> </span><span class="WHIT">         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>342</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">100</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>343</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>344</span> 
<span class='linenumber'>345</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>346</span>     * Load a script relative to the engine path.  A simple helper method which calls
<span class='linenumber'>347</span>     * {@link #loadScript} and prepends the engine path to the supplied script source.
<span class='linenumber'>348</span>     *
<span class='linenumber'>349</span>     * @param scriptSource {String} A URL to load that is relative to the engine path.
<span class='linenumber'>350</span>     * @memberOf Engine
<span class='linenumber'>351</span>     */</span><span class="WHIT">
<span class='linenumber'>352</span> </span><span class="WHIT">   </span><span class="NAME">load</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">scriptSource</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>353</span> </span><span class="WHIT">      </span><span class="NAME">this.loadScript</span><span class="PUNC">(</span><span class="NAME">this.getEnginePath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">scriptSource</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>354</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>355</span> 
<span class='linenumber'>356</span> </span><span class="WHIT">   </span><span class="COMM">/**
<span class='linenumber'>357</span>     * After a script has been loaded, updates the progress
<span class='linenumber'>358</span>     * @private
<span class='linenumber'>359</span>     * @memberOf Engine
<span class='linenumber'>360</span>     */</span><span class="WHIT">
<span class='linenumber'>361</span> </span><span class="WHIT">   </span><span class="NAME">handleScriptDone</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>362</span> </span><span class="WHIT">      </span><span class="NAME">Engine.scriptsProcessed</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>363</span> </span><span class="WHIT">      </span><span class="NAME">Engine.scriptRatio</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Engine.scriptsProcessed</span><span class="WHIT"> </span><span class="REGX">/ Engine.scriptLoadCount;
<span class='linenumber'>364</span>       Engine.scriptRatio = Engine.scriptRatio > 1 ? 1 : Engine.scriptRatio;
<span class='linenumber'>365</span>       Engine.updateProgress();
<span class='linenumber'>366</span>    },
<span class='linenumber'>367</span> 
<span class='linenumber'>368</span>    /</span><span class="PUNC">*</span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>369</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">Updates</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">progress</span><span class="WHIT"> </span><span class="NAME">bar</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="NAME">available</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>370</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">private</span><span class="WHIT">
<span class='linenumber'>371</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">memberOf</span><span class="WHIT"> </span><span class="NAME">Engine</span><span class="WHIT">
<span class='linenumber'>372</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="REGX">/
<span class='linenumber'>373</span>    updateProgress: function() {
<span class='linenumber'>374</span>       var pBar = jQuery("#engine-load-progress");
<span class='linenumber'>375</span>       if (pBar.length > 0) {
<span class='linenumber'>376</span>          /</span><span class="REGX">/ Update their progress bar
<span class='linenumber'>377</span>          if (pBar.css("position") != "relative" || pBar.css("position") != "absolute") {
<span class='linenumber'>378</span>             pBar.css("position", "relative");
<span class='linenumber'>379</span>          }
<span class='linenumber'>380</span>          var pW = pBar.width();
<span class='linenumber'>381</span>          var fill = Math.floor(pW * Engine.scriptRatio);
<span class='linenumber'>382</span>          var fBar = jQuery("#engine-load-progress .bar");
<span class='linenumber'>383</span>          if (fBar.length == 0) {
<span class='linenumber'>384</span>             fBar = jQuery("&lt;div class='bar' style='position: absolute; top: 0px; left: 0px; height: 100%;'>&lt;/</span><span class="NAME">div</span><span class="PUNC">></span><span class="STRN">");
<span class='linenumber'>385</span>             pBar.append(fBar);
<span class='linenumber'>386</span>          }
<span class='linenumber'>387</span>          fBar.width(fill);
<span class='linenumber'>388</span>          jQuery("</span><span class="TOKN">#</span><span class="NAME">engine</span><span class="PUNC">-</span><span class="NAME">load</span><span class="PUNC">-</span><span class="NAME">info</span><span class="STRN">").text(Engine.scriptsProcessed + "</span><span class="WHIT"> </span><span class="NAME">of</span><span class="WHIT"> </span><span class="STRN">" + Engine.scriptLoadCount);
<span class='linenumber'>389</span>       }
<span class='linenumber'>390</span>    },
<span class='linenumber'>391</span> 
<span class='linenumber'>392</span>    /**
<span class='linenumber'>393</span>     * Load a stylesheet and append it to the document.  Allows for
<span class='linenumber'>394</span>     * scripts to specify additional stylesheets that can be loaded
<span class='linenumber'>395</span>     * as needed.  Additionally, you can use thise method to inject
<span class='linenumber'>396</span>     * the engine path into the css being loaded.  Using the variable
<span class='linenumber'>397</span>     * &lt;tt>$&lt;enginePath&gt;&lt;/tt>, you can load css relative to the
<span class='linenumber'>398</span>     * engine's path.  For example:
<span class='linenumber'>399</span>     * &lt;pre>
<span class='linenumber'>400</span>     *    .foo {
<span class='linenumber'>401</span>     *       background: url('$&lt;enginePath&gt;/myGame/images/bar.png') no-repeat 50% 50%;
<span class='linenumber'>402</span>     *    }
<span class='linenumber'>403</span>     * &lt;/pre>
<span class='linenumber'>404</span>     *
<span class='linenumber'>405</span>     * @param stylesheetPath {String} Path to the stylesheet, relative to
<span class='linenumber'>406</span>     *                                the engine path.
<span class='linenumber'>407</span>     * @memberOf Engine
<span class='linenumber'>408</span>     */
<span class='linenumber'>409</span>    loadStylesheet: function(stylesheetPath, relative) {
<span class='linenumber'>410</span>       stylesheetPath = (relative ? "</span><span class="STRN">" : this.getEnginePath()) + stylesheetPath;
<span class='linenumber'>411</span>       var f = function() {
<span class='linenumber'>412</span>          $.get(stylesheetPath, function(data) {
<span class='linenumber'>413</span>             // process the data to replace the "</span><span class="NAME">enginePath</span><span class="STRN">" variable
<span class='linenumber'>414</span>             var epRE = /(\$&lt;enginePath>)/g;
<span class='linenumber'>415</span>             data = data.replace(epRE, Engine.getEnginePath());
<span class='linenumber'>416</span>             $("</span><span class="NAME">head</span><span class="STRN">", document).append($("</span><span class="PUNC">&lt;</span><span class="NAME">style</span><span class="WHIT"> </span><span class="NAME">type</span><span class="PUNC">=</span><span class="STRN">'text/css'</span><span class="REGX">/>").text(data));
<span class='linenumber'>417</span>             Console.debug("Stylesheet loaded '" + stylesheetPath + "'");
<span class='linenumber'>418</span>          }, "text");
<span class='linenumber'>419</span>       };
<span class='linenumber'>420</span> 
<span class='linenumber'>421</span>       this.setQueueCallback(f);
<span class='linenumber'>422</span>    },
<span class='linenumber'>423</span> 
<span class='linenumber'>424</span>    /</span><span class="PUNC">*</span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>425</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">Output</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">list</span><span class="WHIT"> </span><span class="NAME">of</span><span class="WHIT"> </span><span class="NAME">scripts</span><span class="WHIT"> </span><span class="NAME">loaded</span><span class="WHIT"> </span><span class="NAME">by</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">Engine</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">console.</span><span class="WHIT">
<span class='linenumber'>426</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">memberOf</span><span class="WHIT"> </span><span class="NAME">Engine</span><span class="WHIT">
<span class='linenumber'>427</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="REGX">/
<span class='linenumber'>428</span>    dumpScripts: function() {
<span class='linenumber'>429</span>       for (var f in this.loadedScripts)
<span class='linenumber'>430</span>       {
<span class='linenumber'>431</span>          Console.debug(this.loadedScripts[f]);
<span class='linenumber'>432</span>       }
<span class='linenumber'>433</span>    },
<span class='linenumber'>434</span> 
<span class='linenumber'>435</span>    /</span><span class="PUNC">*</span><span class="PUNC">*</span><span class="WHIT">
<span class='linenumber'>436</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">Clears</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">script</span><span class="WHIT"> </span><span class="NAME">name</span><span class="WHIT"> </span><span class="NAME">cache.</span><span class="WHIT">  </span><span class="NAME">Allows</span><span class="WHIT"> </span><span class="NAME">scripts</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">be</span><span class="WHIT"> </span><span class="NAME">loaded</span><span class="WHIT">
<span class='linenumber'>437</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">again.</span><span class="WHIT">  </span><span class="NAME">Use</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="NAME">method</span><span class="WHIT"> </span><span class="KEYW">with</span><span class="WHIT"> </span><span class="NAME">caution</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">as</span><span class="WHIT"> </span><span class="NAME">it</span><span class="WHIT"> </span><span class="NAME">is</span><span class="WHIT"> </span><span class="NAME">not</span><span class="WHIT"> </span><span class="NAME">recommended</span><span class="WHIT">
<span class='linenumber'>438</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">to</span><span class="WHIT"> </span><span class="NAME">load</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="NAME">script</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="NAME">the</span><span class="WHIT"> </span><span class="NAME">object</span><span class="WHIT"> </span><span class="NAME">is</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">use.</span><span class="WHIT">  </span><span class="NAME">May</span><span class="WHIT"> </span><span class="NAME">cause</span><span class="WHIT"> </span><span class="NAME">unexpected</span><span class="WHIT">
<span class='linenumber'>439</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">results.</span><span class="WHIT">
<span class='linenumber'>440</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="TOKN">@</span><span class="NAME">memberOf</span><span class="WHIT"> </span><span class="NAME">Engine</span><span class="WHIT">
<span class='linenumber'>441</span> </span><span class="WHIT">    </span><span class="PUNC">*</span><span class="TOKN"></span></pre>
<hr>

   <div class="jsdoc_copy">&copy;2009 Brett Fattori</div>

<div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoctoolkit.org/" target="_parent">JsDoc Toolkit</a> 1.4.1b on Sun Dec 20 2009 18:05:10 GMT-0500 (EST)</div>
</body>
</html>